/*
 * Copyright 2012 By Teradata China Co.Ltd. All rights reserved
 */
/*
 * Copyright 2012 By Teradata China Co.Ltd. All rights reserved
 * 
 * Created on 2012-02-09
 */
Teradata.util.JSON=new (function(){var useHasOwn=!!{}.hasOwnProperty,isNative=function(){var useNative=null;return function(){if(useNative===null){useNative=Teradata.USE_NATIVE_JSON&&window.JSON&&JSON.toString()=="[object JSON]"}return useNative}}(),pad=function(n){return n<10?"0"+n:n},doDecode=function(json){return json?eval("("+json+")"):""},doEncode=function(o){if(!Teradata.isDefined(o)||o===null){return"null"}else{if(Teradata.isArray(o)){return encodeArray(o)}else{if(Teradata.isDate(o)){return Teradata.util.JSON.encodeDate(o)}else{if(Teradata.isString(o)){return encodeString(o)}else{if(typeof o=="number"){return isFinite(o)?String(o):"null"}else{if(Teradata.isBoolean(o)){return String(o)}else{var a=["{"],b=null,i=null,v;for(i in o){if(!o.getElementsByTagName){if(!useHasOwn||o.hasOwnProperty(i)){v=o[i];switch(typeof v){case"undefined":case"function":case"unknown":break;default:if(b){a.push(",")}a.push(doEncode(i),":",v===null?"null":doEncode(v));b=true}}}}a.push("}");return a.join("")}}}}}}},m={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},encodeString=function(s){if(/["\\\x00-\x1f]/.test(s)){return'"'+s.replace(/([\x00-\x1f\\"])/g,function(a,b){var c=m[b];if(c){return c}c=b.charCodeAt();return"\\u00"+Math.floor(c/16).toString(16)+(c%16).toString(16)})+'"'}return'"'+s+'"'},encodeArray=function(o){var a=["["],b=null,i,l=o.length,v;for(i=0;i<l;i+=1){v=o[i];switch(typeof v){case"undefined":case"function":case"unknown":break;default:if(b){a.push(",")}a.push(v===null?"null":Teradata.util.JSON.encode(v));b=true}}a.push("]");return a.join("")};this.encodeDate=function(o){return'"'+o.getFullYear()+"-"+pad(o.getMonth()+1)+"-"+pad(o.getDate())+"T"+pad(o.getHours())+":"+pad(o.getMinutes())+":"+pad(o.getSeconds())+'"'};this.encode=function(){var ec=null;return function(o){if(!ec){ec=isNative()?JSON.stringify:doEncode}return ec(o)}}();this.decode=function(){var dc=null;return function(json){if(!dc){dc=isNative()?JSON.parse:doDecode}return dc(json)}}()})();Teradata.encode=Teradata.util.JSON.encode;Teradata.decode=Teradata.util.JSON.decode;
/*
 * Copyright 2012 By Teradata China Co.Ltd. All rights reserved
 * 
 * Created on 2012-02-09
 */
(function(){var g=Teradata.util,k=Teradata.each,i=true,j=false;g.Observable=function(){var l=this,m=l.events;if(l.listeners){l.on(l.listeners);delete l.listeners}l.events=m||{}};g.Observable.prototype={filterOptRe:/^(?:scope|delay|buffer|single)$/,fireEvent:function(){var l=Array.prototype.slice.call(arguments,0),n=l[0].toLowerCase(),o=this,m=i,r=o.events[n],t,p,s;if(o.eventsSuspended===i){if(p=o.eventQueue){p.push(l)}}else{if(typeof r=="object"){if(r.bubble){if(r.fire.apply(r,l.slice(1))===j){return j}s=o.getBubbleTarget&&o.getBubbleTarget();if(s&&s.enableBubble){t=s.events[n];if(!t||typeof t!="object"||!t.bubble){s.enableBubble(n)}return s.fireEvent.apply(s,l)}}else{l.shift();m=r.fire.apply(r,l)}}}return m},addListener:function(l,n,m,s){var p=this,r=null,t,q;if(typeof l=="object"){s=l;for(r in s){t=s[r];if(!p.filterOptRe.test(r)){p.addListener(r,t.fn||t,t.scope||s.scope,t.fn?t:s)}}}else{l=l.toLowerCase();q=p.events[l]||i;if(typeof q=="boolean"){p.events[l]=q=new g.Event(p,l)}q.addListener(n,m,typeof s=="object"?s:{})}},removeListener:function(l,n,m){var o=this.events[l.toLowerCase()];if(typeof o=="object"){o.removeListener(n,m)}},purgeListeners:function(){var n=this.events,l,m=null;for(m in n){l=n[m];if(typeof l=="object"){l.clearListeners()}}},addEvents:function(p){var n=this;n.events=n.events||{};if(typeof p=="string"){var l=arguments,m=l.length;while(m--){n.events[l[m]]=n.events[l[m]]||i}}else{Teradata.applyIf(n.events,p)}},hasListener:function(l){var m=this.events[l.toLowerCase()];return typeof m=="object"&&m.listeners.length>0},suspendEvents:function(l){this.eventsSuspended=i;if(l&&!this.eventQueue){this.eventQueue=[]}},resumeEvents:function(){var l=this,m=l.eventQueue||[];l.eventsSuspended=j;delete l.eventQueue;k(m,function(n){l.fireEvent.apply(l,n)})}};var d=g.Observable.prototype;d.on=d.addListener;d.un=d.removeListener;g.Observable.releaseCapture=function(l){l.fireEvent=d.fireEvent};function f(m,n,l){return function(){if(n.target==arguments[0]){m.apply(l,Array.prototype.slice.call(arguments,0))}}}function b(p,q,m,n){m.task=new g.DelayedTask();return function(){m.task.delay(q.buffer,p,n,Array.prototype.slice.call(arguments,0))}}function c(n,o,m,l){return function(){o.removeListener(m,l);return n.apply(l,arguments)}}function a(p,q,m,n){return function(){var l=new g.DelayedTask(),o=Array.prototype.slice.call(arguments,0);if(!m.tasks){m.tasks=[]}m.tasks.push(l);l.delay(q.delay||10,function(){m.tasks.remove(l);p.apply(n,o)},n)}}g.Event=function(m,l){this.name=l;this.obj=m;this.listeners=[]};g.Event.prototype={addListener:function(p,o,n){var q=this,m;o=o||q.obj;if(!q.isListening(p,o)){m=q.createListener(p,o,n);if(q.firing){q.listeners=q.listeners.slice(0)}q.listeners.push(m)}},createListener:function(q,p,r){r=r||{};p=p||this.obj;var m={fn:q,scope:p,options:r},n=q;if(r.target){n=f(n,r,p)}if(r.delay){n=a(n,r,m,p)}if(r.single){n=c(n,this,q,p)}if(r.buffer){n=b(n,r,m,p)}m.fireFn=n;return m},findListener:function(p,o){var q=this.listeners,n=q.length,m;o=o||this.obj;while(n--){m=q[n];if(m){if(m.fn==p&&m.scope==o){return n}}}return -1},isListening:function(m,l){return this.findListener(m,l)!=-1},removeListener:function(r,q){var p,m,n,s=this,o=j;if((p=s.findListener(r,q))!=-1){if(s.firing){s.listeners=s.listeners.slice(0)}m=s.listeners[p];if(m.task){m.task.cancel();delete m.task}n=m.tasks&&m.tasks.length;if(n){while(n--){m.tasks[n].cancel()}delete m.tasks}s.listeners.splice(p,1);o=i}return o},clearListeners:function(){var o=this,m=o.listeners,n=m.length;while(n--){o.removeListener(m[n].fn,m[n].scope)}},fire:function(){var r=this,q=r.listeners,m=q.length,p=0,n;if(m>0){r.firing=i;var o=Array.prototype.slice.call(arguments,0);for(;p<m;p++){n=q[p];if(n&&n.fireFn.apply(n.scope||r.obj||window,o)===j){return(r.firing=j)}}}r.firing=j;return i}}})();
/*
 * Copyright 2012 By Teradata China Co.Ltd. All rights reserved
 * 
 * Created on 2012-02-09
 */
Teradata.data.Record=Teradata.extend(Object,{constructor:function(b,c,a){Teradata.data.Record.superclass.constructor.call(this);this.id=c;this.store=a;this.data=b},set:function(c,b,d){if(this.hasField(c)){var a=this.get(c);if(a!==b){this.data[c]=b;this.modified=true;if(!d){this.store.fireEvent("update",this.store,this,c,b,a)}}}},get:function(a){return this.data[a]},hasField:function(a){return !this.store||this.store.hasField(a)},destroy:function(){delete this.store;delete this.data;delete this.id}});
/*
 * Copyright 2012 By Teradata China Co.Ltd. All rights reserved
 * 
 * Created on 2012-02-09
 */
Teradata.data.Store=Teradata.extend(Teradata.util.Observable,{identifier:"id",method:"GET",autoLoad:false,defaultSortDirection:"desc",dataFormat:"array",constructor:function(b){Teradata.data.Store.superclass.constructor.call(this,b);this.datas=b.datas;this.initFields(b.fields);this.url=b.url;this.method=b.method||this.method;this.identifier=b.identifier||this.identifier;this.dataFormat=b.dataFormat||this.dataFormat;if(b.sort){this.addSort(b.sort)}this.addEvents("remove","clear","add","beforeload","load","update");if(b.params){this.params=b.params}this.map={};this.records=[];if(this.datas){var a=this.createRecords(this.datas);this.add(a);delete this.datas}else{if(this.url&&this.autoLoad){this.load()}}},initFields:function(b){var a=[];for(var c=0;c<b.length;c++){a.push(new Teradata.data.Field(b[c]))}this.fields=a},initSort:function(){if(!this.sort){this.sort=[]}},addSort:function(d,b){this.initSort();if(Teradata.isArray(d)){for(var c=0;c<d.length;c++){this.addSort(d[c],false)}if(b===true&&this.url){this.load()}}else{if(!Teradata.isEmpty(d)){if(Teradata.isString(d)){d={field:d}}if(d.field){var a=this.hasSort(d);var f=a!==false?this.sort[a]:{direction:this.defaultSortDirection};Teradata.apply(f,d);if(a===false){this.sort.push(f)}if(b===true&&this.url){this.load()}}}}},hasSort:function(b){this.initSort();if(b instanceof Teradata.data.Field){b=b.name}else{if(Teradata.isString(b.field)){b=b.field}}if(!Teradata.isEmpty(b)&&Teradata.isString(b)){for(var a=0;a<this.sort.length;a++){if(this.sort[a].field===b){return a}}}return false},removeSort:function(b){var a=this.hasSort(b);if(a!==false){this.sort.remove(this.sort[a])}},createRecords:function(a){var b=[];if(a&&a.length>0){for(var c=0;c<a.length;c++){b.push(this.createRecord(a[c]))}}return b},createRecord:function(d){var g=this.findId(d);if(!Teradata.isPrimitive(g)){g=this.generateId()}var a={};for(var b=0;b<this.fields.length;b++){var f=this.fields[b];var c=this.findData(d,f);a[f.name]=this.parseData(c,f.getType())}return new Teradata.data.Record(a,g,this)},parseData:function(){var a={string:function(b){return b?b.toString():""},integer:function(b){return parseInt(b,10)},"float":function(b){return parseFloat(b)},date:function(c,d){if(Teradata.isNumber(c)){var b=new Date();b.setTime(c);return b}else{if(Teradata.isString(c)){var b=Date.parseDate(c,d);return b}else{if(Teradata.isDate(c)){return c}}}return null},"boolean":function(b){return !!b}};return function(c,b,f){var d=a[b];if(d){return d.call(this,c,f)}else{return c}}}(),findId:function(b){if(this.identifier instanceof Array){var c="";for(var a=0;a<this.identifier.length;a++){c+=this.findData(b,this.identifier[a])}}else{return this.findData(b,this.identifier)}},findData:function(b,c){if(this.dataFormat=="map"){return b[c.getName?c.getName():c]}else{var a=this.getFieldIndex(c);if(a!=-1){return b[a]}}},getFieldIndex:function(b){if(Teradata.isString(b)){for(var a=0;a<this.fields.length;a++){if(this.fields[a].name===b){return a}}}else{return this.fields.indexOf(b)}return -1},generateId:function(){var a=100000;return function(){return"teradata-record-"+(a++)}}(),removeById:function(a){this.remove(this.getById(a))},remove:function(a){var c=this.map[a.id];if(c==a){this.fireEvent("remove",this,c,b);delete this.map[a.id];var b=this.records.indexOf(a);this.records.removeAt(b)}},removeAll:function(){if(this.records&&this.records.length>0){this.fireEvent("clear",this,this.records);delete this.map;delete this.records;this.map={};this.records=[]}},add:function(a,g){if(a instanceof Array){var b=this.records.length;for(var c=0;c<a.length;c++){this.add(a[c],true)}if(!g){this.fireEvent("add",this,a,b)}}else{if(Teradata.isPrimitive(a.id)){var d=this.getById(a.id);if(d){return}}else{throw'Invalid record id, is not JavaScript "primitive", a string, number or boolean.';return}var b=this.records.length;for(var f in a.data){if(!this.hasField(f)){delete a.data[f]}}this.records.push(a);this.map[a.id]=a;if(!g){this.fireEvent("add",this,a,b)}}},getAt:function(a){return this.records[a]},getById:function(a){return this.map[a]},load:function(){if(this.fireEvent("beforeload",this)!==false){var c=Teradata.Ajax[this.method.toLowerCase()];if(Teradata.isFunction(c)){var d=this.params||{};if(this.sort){var b=[];for(var a=0;a<this.sort.length;a++){b.push([this.sort[a].field,this.sort[a].direction].join(","))}Teradata.apply(d,{sort:b.join(";")})}c(this.url,d,this.loadData.createDelegate(this),"json")}else{throw'Request method "'+this.method+'" is not supported.'}}},loadData:function(b,a){var c=this.createRecords(b);if(a!==true){this.removeAll()}this.add(c,true);this.fireEvent("load",this,c)},hasField:function(a){return this.getFieldIndex(a)!=-1},getFieldType:function(a){a=this.fields[this.getFieldIndex(a)];if(a){return a.getType()}},getCount:function(){return this.records.length},findBy:function(f,d){var a=[];for(var b=0;b<this.records.length;b++){var c=this.records[b];if(c.get(f)==d){a.push(c)}}return a},getBy:function(d,c){for(var a=0;a<this.records.length;a++){var b=this.records[a];if(b.get(d)==c){return b}}},getModifiedRecords:function(){var c=[];for(var a=0;a<this.records.length;a++){var b=this.records[a];if(b.modified===true){c.push(b)}}return c},destroy:function(){for(var b=0;b<this.records.length;b++){var a=this.records[b];delete this.map[a.id];a.destroy()}delete this.records;delete this.map;delete this.fields}});Teradata.data.Field=Teradata.extend(Object,{defaultType:"string",constructor:function(a){if(Teradata.isString(a)){this.name=a}else{Teradata.apply(this,a)}},getName:function(){return this.name},getType:function(){return this.type||this.defaultType}});
/*
 * Copyright 2012 By Teradata China Co.Ltd. All rights reserved
 * 
 * Created on 2012-02-09
 */
Teradata.data.JsonStore=Teradata.extend(Teradata.data.Store,{constructor:function(a){if(a.json){a.datas=a.json[this.root]}this.root=a.root;Teradata.data.JsonStore.superclass.constructor.apply(this,arguments)},loadData:function(b,a){this.json=b;var c=b[this.root];delete b[this.root];Teradata.data.JsonStore.superclass.loadData.call(this,c,a)}});
/*
 * Copyright 2012 By Teradata China Co.Ltd. All rights reserved
 * 
 * Created on 2012-02-09
 */
Teradata.data.PaginationStore=Teradata.extend(Teradata.data.JsonStore,{currentPage:0,pageSize:20,constructor:function(a){Teradata.data.PaginationStore.superclass.constructor.call(this,a);this.pageSize=a.pageSize||this.pageSize},getPageSize:function(){return this.pageSize},getPages:function(){var c=this.getTotalCount();var b=this.getPageSize();var a=c%b;return a!=0?parseInt(c/b+1,10):parseInt(c/b,10)},getTotalCount:function(){return parseInt(this.json.count,10)},getCurrentPage:function(){return this.currentPage},nextPage:function(){if(this.hasNextPage()){this.currentPage+=1;this.load()}},prevPage:function(){if(this.hasPrevPage()){this.currentPage-=1;this.load()}},forwardPage:function(a){if(this.hasPage(a)&&a!=this.getCurrentPage()){this.currentPage=a;this.load()}},hasNextPage:function(){return this.hasPage(this.currentPage+1)},hasPrevPage:function(){return this.hasPage(this.currentPage-1)},hasPage:function(a){return a>=0&&a<this.getPages()},load:function(){this.params=this.params||{};this.params.start=this.getCurrentPage()*this.pageSize;this.params.limit=this.pageSize;this.params.end=this.params.start+this.params.limit;Teradata.data.PaginationStore.superclass.load.apply(this,arguments)}});
/*
 * Copyright 2012 By Teradata China Co.Ltd. All rights reserved
 * 
 * Created on 2012-02-09
 */
Teradata.Shadow=Teradata.extend(Object,{offset:4,opacity:0.6,constructor:function(a){this.id=Teradata.id(null,"teradata-shadow-");Teradata.apply(this,a)},applyTo:function(b){this.target=Teradata.get(b);if(!this.el){this.createEl()}if(this.el.parent().get(0)&&this.el.parent().get(0)!=this.target.parent().get(0)){this.el.remove()}else{if(this.el.parent().get(0)!=this.target.parent().get(0)){this.el.insertAfter(this.target)}}this.el.css("z-index",this.getTargetZIndex()-1);this.el.width(this.target.outerWidth());var a=this.target.outerHeight();this.el.height(a);this.mcEl.height(a-this.tcEl.outerHeight()-this.bcEl.outerHeight());this.el.css("top",this.offset);this.el.css("left",this.offset)},createEl:function(){var c=Teradata.get(document.createElement("div"));c.attr("id",this.id);c.addClass("teradata-shadow");var n=Teradata.get(document.createElement("div"));var i=Teradata.get(document.createElement("div"));var l=Teradata.get(document.createElement("div"));n.addClass("teradata-shadow-tl");i.addClass("teradata-shadow-tr");l.addClass("teradata-shadow-t");c.append(n);n.append(i);i.append(l);var g=Teradata.get(document.createElement("div"));var a=Teradata.get(document.createElement("div"));var f=Teradata.get(document.createElement("div"));g.addClass("teradata-shadow-l");a.addClass("teradata-shadow-r");f.addClass("teradata-shadow-m");c.append(g);g.append(a);a.append(f);var d=Teradata.get(document.createElement("div"));var k=Teradata.get(document.createElement("div"));var j=Teradata.get(document.createElement("div"));d.addClass("teradata-shadow-bl");k.addClass("teradata-shadow-br");j.addClass("teradata-shadow-b");c.append(d);d.append(k);k.append(j);c.css("opacity",this.opacity);this.el=c;this.mcEl=f;this.tcEl=l;this.bcEl=j},getTargetZIndex:function(){return parseInt(this.target.css("z-index"),10)}});
/*
 * Copyright 2012 By Teradata China Co.Ltd. All rights reserved
 * 
 * Created on 2012-02-09
 */
Teradata.ComponentMgr=function(){var b={};var a={};var c=10000;return{reg:function(d,f){if(Teradata.ADF.WIDGET_ROUNDED_CORNERS===false){f.prototype.corners="none"}b[d]=f;f.xtype=d},create:function(d,f){return d.xtype?new b[d.xtype](d):new b[f](d)},get:function(d){return a[d]},generateId:function(){return c++},register:function(d){a[d.getId()]=d},unregister:function(d){delete a[d.getId()]}}}();Teradata.apply(Teradata,{reg:Teradata.ComponentMgr.reg,create:Teradata.ComponentMgr.create});
/*
 * Copyright 2012 By Teradata China Co.Ltd. All rights reserved
 * 
 * Created on 2012-02-09
 */
Teradata.Component=function(a){Teradata.apply(this,a);if(this.el){this.el=Teradata.get(this.el)}this.addEvents("added","disable","enable","beforeshow","show","beforehide","hide","removed","beforerender","render","afterrender","beforedestroy","destroy");this.getId();Teradata.ComponentMgr.register(this);Teradata.Component.superclass.constructor.call(this);this.initComponent();if(this.applyTo){this.render(this.applyTo)}};Teradata.extend(Teradata.Component,Teradata.util.Observable,{hideMode:"hidden",autoEl:"div",idAttr:"id",hidden:false,initComponent:function(){if(this.listeners){this.on(this.listeners);delete this.listeners}},render:function(b,a){if(!this.rendered&&this.fireEvent("beforerender",this)!==false){if(!this.container&&this.el){this.el=Teradata.get(this.el);b=this.el.get(0).parentNode;this.allowDomMove=false}this.container=Teradata.get(b);this.rendered=true;if(a!==undefined){if(Teradata.isNumber(a)){a=this.container.get(0).childNodes[a]}else{a=Teradata.get(a).get(0)}}this.onRender(this.container,a||null);if(this.cls){this.el.addClass(this.cls);delete this.cls}if(this.style){this.el.css(this.style);delete this.style}this.fireEvent("render",this);var c=this.getContentTarget();if(this.html){c.html(this.html);delete this.html}this.afterRender(this.container);if(this.hidden){this.doHide()}if(this.disabled){this.disable(true)}this.fireEvent("afterrender",this)}},onRender:function(b,a){if(!this.el&&this.autoEl){this.el=Teradata.createDom(this.autoEl)}if(this.el){this.el=Teradata.get(this.el);if(!this.el.attr(this.idAttr)){this.el.attr(this.idAttr,this.getId())}if(this.allowDomMove!==false){if(a){(this.itemWrap||this.el).insertBefore(a)}else{b.append(this.itemWrap||this.el)}if(this.itemWrap){this.itemWrap.append(this.el)}}(this.itemWrap||this.el).addClass("teradata-widget")}},afterRender:Teradata.emptyFn,getContentTarget:function(){return this.el},getId:function(){if(this.el&&!this.id){this.id=this.el.attr("comp-id")||this.el.attr(this.idAttr)}return this.id?this.id:(this.id="teradata-ui-comp-"+Teradata.ComponentMgr.generateId())},show:function(){if(this.fireEvent("beforeshow",this)!==false){this.hidden=false;if(this.autoRender){this.render(Teradata.isBoolean(this.autoRender)?Teradata.query("body"):this.autoRender)}if(this.rendered){this.onShow()}this.fireEvent("show",this)}return this},onShow:function(){this.getPositionEl().removeClass("teradata-hide-"+this.hideMode)},hide:function(){if(this.fireEvent("beforehide",this)!==false){this.doHide();this.fireEvent("hide",this)}return this},doHide:function(){this.hidden=true;if(this.rendered){this.onHide()}},onHide:function(){this.getPositionEl().addClass("teradata-hide-"+this.hideMode)},bind:function(d,a,c,b){d=d||this.el;var f=function(i){if(!this.disabled){var g=i.data.scope;return c.apply(g,arguments)}}.createDelegate(this);d.bind(a,{scope:b||this},f)},setVisible:function(a){return this[a?"show":"hide"]()},isVisible:function(){return this.rendered&&this.getPositionEl().is(":visible")&&!this.getPositionEl().hasClass("teradata-hide-position")},disable:function(a){this.disabled=a;var b=this.getPositionEl();this.el.attr("disabled",a);b.attr("disabled",a);if(a&&this.disabledCls){b.addClass(this.disabledCls)}else{if(this.disabledCls){b.removeClass(this.disabledCls)}}},destroy:function(){if(!this.isDestroyed){if(this.fireEvent("beforedestroy",this)!==false){this.destroying=true;this.beforeDestroy();if(this.ownerCt&&this.ownerCt.remove){this.ownerCt.remove(this,false)}if(this.rendered){this.getPositionEl().remove();if(this.actionMode=="container"||this.removeMode=="container"){this.container.remove()}}if(this.focusTask&&this.focusTask.cancel){this.focusTask.cancel()}this.onDestroy();Teradata.ComponentMgr.unregister(this);this.fireEvent("destroy",this);this.purgeListeners();this.destroying=false;this.isDestroyed=true}}},beforeDestroy:Teradata.emptyFn,onDestroy:Teradata.emptyFn,onRemoved:function(){this.fireEvent("removed",this,this.ownerCt);delete this.ownerCt},onAdded:function(a,b){this.ownerCt=a;this.fireEvent("added",this,a,b)},getEl:function(){return this.el},getPositionEl:function(){return this.el},getXType:function(){return this.constructor.xtype}});
/*
 * Copyright 2012 By Teradata China Co.Ltd. All rights reserved
 * 
 * Created on 2012-02-09
 */
Teradata.BoxComponent=Teradata.extend(Teradata.Component,{boxReady:false,deferHeight:false,corners:"all",initComponent:function(){if(this.el){this.width=this.el.width();this.height=this.el.height()}Teradata.BoxComponent.superclass.initComponent.call(this);this.addEvents("resize")},setSize:function(b,d){if(typeof b=="object"){d=b.height;b=b.width}if(Teradata.isDefined(b)&&Teradata.isDefined(this.boxMinWidth)&&(b<this.boxMinWidth)){b=this.boxMinWidth}if(Teradata.isDefined(d)&&Teradata.isDefined(this.boxMinHeight)&&(d<this.boxMinHeight)){d=this.boxMinHeight}if(Teradata.isDefined(b)&&Teradata.isDefined(this.boxMaxWidth)&&(b>this.boxMaxWidth)){b=this.boxMaxWidth}if(Teradata.isDefined(d)&&Teradata.isDefined(this.boxMaxHeight)&&(d>this.boxMaxHeight)){d=this.boxMaxHeight}if(!this.boxReady){this.width=b;this.height=d;return this}if(this.cacheSizes!==false&&this.lastSize&&this.lastSize.width==b&&this.lastSize.height==d){return this}this.lastSize={width:b,height:d};var c=this.adjustSize(b,d),g=c.width,a=c.height,f;if(g!==undefined||a!==undefined){f=this.getResizeEl();if(!this.deferHeight&&g!==undefined&&a!==undefined){f.width(g);f.height(a)}else{if(!this.deferHeight&&a!==undefined){f.height(a)}else{if(g!==undefined){f.width(g)}}}this.onResize(g,a,b,d);this.fireEvent("resize",this,g,a,b,d)}return this},onResize:function(g,b,a,f){var c=this.getContentTarget();if(this.corners=="all"){c.height(b-(this.top?this.top.outerHeight():0)-(this.bottom?this.bottom.outerHeight():0))}else{if(this.corners=="lr"){var d=g-(this.ml?this.ml.outerWidth():0)-(this.mr?this.mr.outerWidth():0);c.width(d)}else{if(this.corners=="l"){var d=g-(this.ml?this.ml.outerWidth():0);c.width(d)}else{if(this.corners=="r"){var d=g-(this.mr?this.mr.outerWidth():0);c.width(d)}else{if(this.corners=="b"){c.height(b-(this.bottom?this.bottom.outerHeight():0))}else{if(this.corners=="t"){c.height(b-(this.top?this.top.outerHeight():0))}}}}}}},setWidth:function(a){return this.setSize(a)},setHeight:function(a){return this.setSize(undefined,a)},getWidth:function(){return this.getResizeEl().width()},getHeight:function(){return this.getResizeEl().height()},setAutoScroll:function(a){if(this.rendered){var b=this.getScrollEl();if(this.autoScroll=="x"){b.css("overflow-x","auto");b.css("overflow-y","hidden")}else{if(this.autoScroll=="y"){b.css("overflow-y","auto");b.css("overflow-x","hidden")}else{if(this.autoScroll===true){b.css("overflow","auto")}else{b.css("overflow","hidden")}}}}this.autoScroll=a;return this},onRender:function(){Teradata.BoxComponent.superclass.onRender.apply(this,arguments);this.renderCorners()},afterRender:function(){Teradata.BoxComponent.superclass.afterRender.call(this);if(this.resizeEl){this.resizeEl=Teradata.get(this.resizeEl)}if(this.positionEl){this.positionEl=Teradata.get(this.positionEl)}this.boxReady=true;Teradata.isDefined(this.autoScroll)&&this.setAutoScroll(this.autoScroll);this.setSize(this.width,this.height)},renderCorners:function(){if(this.corners=="all"){this.renderTopCorners();this.renderMiddle();this.renderBottomCorners()}else{if(this.corners=="lr"){this.renderSimpleCorners(true,true)}else{if(this.corners=="l"){this.renderSimpleCorners(true,false)}else{if(this.corners=="r"){this.renderSimpleCorners(false,true)}else{if(this.corners=="b"){this.renderMiddle();this.renderBottomCorners()}else{if(this.corners=="t"){this.renderTopCorners();this.renderMiddle()}}}}}}},renderSimpleCorners:function(c,g){var j=this.getPositionEl();var i=j.find("div.teradata-widget-corners-left");var b=j.find("div.teradata-widget-center");var d=j.find("div.teradata-widget-corners-right");if(c!==false){if(i.size()>0){i=Teradata.get(i.get(0))}else{i=document.createElement("div");i.className="teradata-widget-corners-left"}}if(b.size()>0){b=Teradata.get(b.get(0));this.mc=b}else{var f=this.el;f.wrap('<div class="teradata-widget-center"></div>');this.mc=Teradata.get(f.parent())}if(g!==false){if(d.size()>0){d=Teradata.get(d.get(0))}else{d=document.createElement("div");d.className="teradata-widget-corners-right"}}if(c!==false){this.ml=Teradata.get(i);this.ml.insertBefore(this.mc)}if(g!==false){this.mr=Teradata.get(d);this.mr.insertAfter(this.mc)}if(!j.children().last().is(".teradata-clear")){var a=Teradata.get(document.createElement("div"));a.addClass("teradata-clear");this.getPositionEl().append(a)}},renderTopCorners:function(){var c=this.getPositionEl();var a=c.find(".teradata-widget-tl")[0];var b=c.find(".teradata-widget-tc")[0];var d=c.find(".teradata-widget-tr")[0];if(!a){a=document.createElement("div")}if(!d){d=document.createElement("div")}if(!b){b=document.createElement("div")}a=Teradata.get(a);b=Teradata.get(b);d=Teradata.get(d);if(!a.parent().get(0)){if(this.itemWrap){a.insertBefore(this.el)}else{c.append(a)}}if(!d.parent().get(0)){a.append(d)}if(!b.parent().get(0)){d.append(b)}a.addClass("teradata-widget-tl");b.addClass("teradata-widget-tc");d.addClass("teradata-widget-tr");this.top=a;this.tc=b},renderMiddle:function(){var b=this.getPositionEl();var d=b.find(".teradata-widget-ml")[0];var c=b.find(".teradata-widget-mc")[0];var a=b.find(".teradata-widget-mr")[0];if(!d){d=document.createElement("div")}if(!a){a=document.createElement("div")}if(!c){c=document.createElement("div")}d=Teradata.get(d);c=Teradata.get(c);a=Teradata.get(a);if(!d.parent().get(0)){if(this.itemWrap){this.el.wrap(d);d=this.el.parent()}else{b.append(d)}}if(!a.parent().get(0)){if(this.itemWrap){this.el.wrap(a);a=this.el.parent()}else{d.append(a)}}if(!c.parent().get(0)){if(this.itemWrap){this.el.wrap(c);c=this.el.parent()}else{a.append(c)}}d.addClass("teradata-widget-ml");c.addClass("teradata-widget-mc");a.addClass("teradata-widget-mr");this.middle=d;this.mc=c},renderBottomCorners:function(){var c=this.getPositionEl();var b=c.find(".teradata-widget-bl")[0];var a=c.find(".teradata-widget-bc")[0];var d=c.find(".teradata-widget-br")[0];if(!b){b=document.createElement("div")}if(!a){a=document.createElement("div")}if(!d){d=document.createElement("div")}b=Teradata.get(b);a=Teradata.get(a);d=Teradata.get(d);if(!b.parent().get(0)){c.append(b)}if(!d.parent().get(0)){b.append(d)}if(!a.parent().get(0)){d.append(a)}b.addClass("teradata-widget-bl");a.addClass("teradata-widget-bc");d.addClass("teradata-widget-br");this.bottom=b;this.bc=a},adjustSize:function(a,b){if(this.autoWidth){a="auto"}if(this.autoHeight){b="auto"}return{width:a,height:b}},isHeightResizable:function(){return !Teradata.isDefined(this.boxMinHeight)||!Teradata.isDefined(this.boxMaxHeight)||this.boxMinHeight!=this.boxMaxHeight},getResizeEl:function(){return this.el},getContentTarget:function(){return this.mc||this.el},getScrollEl:function(){return this.getContentTarget()}});
/*
 * Copyright 2012 By Teradata China Co.Ltd. All rights reserved
 * 
 * Created on 2012-02-09
 */
Teradata.widget.Button=Teradata.extend(Teradata.BoxComponent,{text:"Button",width:60,boxMinHeight:29,boxMaxHeight:29,corners:"lr",hoverCls:"teradata-widget-button-hover",focusCls:"teradata-widget-button-focus",clickCls:"teradata-widget-button-click",disabledCls:"teradata-widget-button-disabled",initComponent:function(){this.addEvents("click");Teradata.widget.Button.superclass.initComponent.call(this)},onRender:function(){if(!this.el&&!this.itemWrap){var a=document.createElement("button");this.el=Teradata.get(a);this.el.wrap("<div></div>");this.itemWrap=Teradata.get(this.el.parent())}else{if(this.el&&!this.itemWrap){this.el.wrap("<div></div>");this.itemWrap=Teradata.get(this.el.parent())}}Teradata.widget.Button.superclass.onRender.apply(this,arguments);this.el.removeClass("teradata-widget-button");this.itemWrap.addClass("teradata-widget-button");this.setText(this.text)},onResize:function(a,b){if(this.autoWidth){if(Teradata.isIE6){a=this.el.outerWidth();this.itemWrap.width(a+(this.ml?this.ml.outerWidth():0)+(this.mr?this.mr.outerWidth():0))}}else{Teradata.widget.Button.superclass.onResize.apply(this,arguments);this.el.width(a-(this.ml?this.ml.outerWidth():0)-(this.mr?this.mr.outerWidth():0))}},afterRender:function(){Teradata.widget.Button.superclass.afterRender.apply(this,arguments);this.initEvents()},initEvents:function(){var a=this.getPositionEl();this.bind(a,"mouseover",this.onMouseOver);this.bind(a,"mouseout",this.onMouseOut);this.bind(this.el,"focus",this.onFocus);this.bind(this.el,"blur",this.onBlur);this.bind(a,"mousedown",this.onMouseDown);this.bind(a,"mouseup",this.onMouseUp);this.bind(a,"click",this.onClick);this.bind(this.el,"keydown",function(b){if(b.keyCode==13||b.keyCode==32){this.onMouseDown(b)}});this.bind(this.el,"keyup",function(b){if(b.keyCode==13||b.keyCode==32){this.onMouseUp(b)}})},onMouseOver:function(b){var a=this.getPositionEl();if(!a.hasClass(this.hoverCls)){a.addClass(this.hoverCls)}},onMouseOut:function(b){var a=this.getPositionEl();if(a.hasClass(this.hoverCls)){this.getPositionEl().removeClass(this.hoverCls)}if(a.hasClass(this.clickCls)){this.getPositionEl().removeClass(this.clickCls)}},onFocus:function(a){this.getPositionEl().addClass(this.focusCls);if(!this.hasFocus){this.hasFocus=true}},onBlur:function(a){this.hasFocus=false;this.getPositionEl().removeClass(this.focusCls)},onMouseDown:function(a){this.getPositionEl().addClass(this.clickCls)},onMouseUp:function(a){var b=this.getPositionEl();b.removeClass(this.clickCls);if(this.hasFocus){b.removeClass(this.focusCls).addClass(this.focusCls)}},onClick:function(a){a.preventDefault();this.fireEvent("click",this);if(Teradata.isFunction(this.handler)){this.handler.call(this.scope||this)}},setText:function(a){this.text=a;this.el.html(this.text)},getPositionEl:function(){return this.itemWrap},getResizeEl:function(){return this.itemWrap}});Teradata.reg("button",Teradata.widget.Button);
/*
 * Copyright 2012 By Teradata China Co.Ltd. All rights reserved
 * 
 * Created on 2012.03.19
 */
Teradata.widget.DatePicker=Teradata.extend(Teradata.BoxComponent,{corners:"none",format:"yyyy-MM-dd",time:false,yearMonthText:"{1} {0}",mousewheelTip:"Sliding the mouse wheel to adjust",initComponent:function(){this.addEvents("select");Teradata.widget.DatePicker.superclass.initComponent.call(this);this.setMinDate(this.minDate);this.setMaxDate(this.maxDate);this.setDate(this.date);this.pickerDate=this.date?this.date.clone():new Date()},onRender:function(){Teradata.widget.DatePicker.superclass.onRender.apply(this,arguments);this.el.addClass("teradata-widget-datepicker");this.renderPicker()},renderPicker:function(){this.pickerHeader=Teradata.get(document.createElement("div"));this.pickerHeader.addClass("teradata-widget-datepicker-header");this.yearLabel=Teradata.get(document.createElement("div"));this.yearLabel.addClass("teradata-widget-datepicker-header-text");this.prevYear=Teradata.get(document.createElement("a"));this.prevYear.addClass("teradata-icon").addClass("teradata-widget-datepicker-header-prevyear").attr("href","#");this.prevMonth=Teradata.get(document.createElement("a"));this.prevMonth.addClass("teradata-icon").addClass("teradata-widget-datepicker-header-prevmonth").attr("href","#");this.nextMonth=Teradata.get(document.createElement("a"));this.nextMonth.addClass("teradata-icon").addClass("teradata-widget-datepicker-header-nextmonth").attr("href","#");this.nextYear=Teradata.get(document.createElement("a"));this.nextYear.addClass("teradata-icon").addClass("teradata-widget-datepicker-header-nextyear").attr("href","#");this.pickerFooter=Teradata.get(document.createElement("div"));this.pickerFooter.addClass("teradata-widget-datepicker-footer");this.dateEl=Teradata.get(document.createElement("div"));this.el.append(this.pickerHeader);this.pickerHeader.append(this.prevYear);this.pickerHeader.append(this.prevMonth);this.pickerHeader.append(this.nextYear);this.pickerHeader.append(this.nextMonth);this.pickerHeader.append(this.yearLabel);this.el.append(this.dateEl);this.el.append(this.pickerFooter);var c=['<table colspadding="0" cellspacing="0" class="teradata-widget-datepicker-table">'];for(var b=0;b<7;b++){c.push("<tr>");for(var a=0;a<7;a++){if(b==0){c.push('<th align="center" valign="center">');c.push(Date.dayNames[a]);c.push("</th>")}else{c.push('<td align="center" valign="center"></td>')}}c.push("</tr>")}c.push("</table>");this.dateEl.get(0).innerHTML=c.join("");this.tds=this.dateEl.find("td");this.update()},initEvents:function(){this.bind(this.el,"click",this.onPickerClick);this.bind(this.el,"mousewheel",this.onPickerMouseWheel)},onPickerClick:function(b){b.preventDefault();b.stopPropagation();var a=Teradata.get(b.target);if(a.parent().is("td")&&!a.parent().is(".teradata-widget-datepicker-disabled")){var c=this.pickerDate.clone();c.setMonth(parseInt(a.attr("rel"),10));c.setDate(parseInt(a.html(),10));this.setDate(c);this.fireEvent("select",this,c.clone())}else{if(a.is(".teradata-widget-datepicker-header-prevyear")){this.pickerDate.setFullYear(this.pickerDate.getFullYear()-1);this.update()}else{if(a.is(".teradata-widget-datepicker-header-prevmonth")){this.pickerDate.setMonth(this.pickerDate.getMonth()-1);this.update()}else{if(a.is(".teradata-widget-datepicker-header-nextmonth")){this.pickerDate.setMonth(this.pickerDate.getMonth()+1);this.update()}else{if(a.is(".teradata-widget-datepicker-header-nextyear")){this.pickerDate.setFullYear(this.pickerDate.getFullYear()+1);this.update()}}}}}},onPickerMouseWheel:function(b,c){b.preventDefault();if(Teradata.isNumber(c)){var a=Teradata.get(b.target);if(a.is(".teradata-widget-datepicker-header-year")){this.pickerDate.setFullYear(this.pickerDate.getFullYear()-c);this.update()}else{if(a.is(".teradata-widget-datepicker-header-month")){this.pickerDate.setMonth(this.pickerDate.getMonth()-c);this.update()}}}},update:function(){if(this.rendered){var c=this.pickerDate.clone();var a=new Date();c.setDate(1);c.setDate(-(c.getDay()-1));this.yearLabel.html(this.formatYearMonthText(this.pickerDate));for(var b=0;b<this.tds.length;b++){var f=this.tds[b];f.className="";f.innerHTML='<a href="#" rel="'+c.getMonth()+'">'+c.getDate()+"</a>";if(this.date&&c.dateEquals(this.date)){f.className="teradata-widget-datepicker-selected"}else{if(c.dateEquals(a)){f.className="teradata-widget-datepicker-today"}else{if((this.minDate&&c.dateLessThan(this.minDate))||(this.maxDate&&c.dateGreatThan(this.maxDate))){f.className="teradata-widget-datepicker-disabled"}else{if(c.monthEquals(this.pickerDate)){f.className="teradata-widget-datepicker-month"}}}}c.nextDay()}}},setDate:function(a){if(a){if(Teradata.isString(a)){a=Date.parseDate(a,this.format)}this.date=a}else{this.date=null}this.update()},getDate:function(){return this.date},setMinDate:function(a){if(a){if(Teradata.isString(a)){a=Date.parseDate(a,this.format)}this.minDate=a}else{this.minDate=null}this.update()},setMaxDate:function(a){if(a){if(Teradata.isString(a)){a=Date.parseDate(a,this.format)}this.maxDate=a}else{this.maxDate=null}this.update()},setPickerDate:function(a){if(a){if(Teradata.isString(a)){a=Date.parseDate(a,this.format)}this.pickerDate=a}else{this.pickerDate=null}this.update()},formatYearMonthText:function(a){return String.format(this.yearMonthText,'<span class="teradata-widget-datepicker-header-year" title="'+this.mousewheelTip+'">'+a.getFullYear()+"</span>",'<span class="teradata-widget-datepicker-header-month" title="'+this.mousewheelTip+'">'+Date.monthNames[a.getMonth()]+"</span>")},afterRender:function(){Teradata.widget.DatePicker.superclass.afterRender.apply(this,arguments);this.initEvents()}});Teradata.reg("datepicker",Teradata.widget.DatePicker);
/*
 * Copyright 2012 By Teradata China Co.Ltd. All rights reserved
 * 
 * Created on 2012-02-09
 */
Teradata.widget.Container=Teradata.extend(Teradata.BoxComponent,{autoDestroy:true,corners:"none",initComponent:function(){Teradata.widget.Container.superclass.initComponent.call(this);this.addEvents("afterlayout","beforeadd","beforeremove","add","remove");var a=this.items;if(a){delete this.items;this.add(a)}},onRender:function(){Teradata.widget.Container.superclass.onRender.apply(this,arguments);this.el.addClass("teradata-widget-container")},afterRender:function(){Teradata.widget.Container.superclass.afterRender.apply(this,arguments);if(!this.layout){this.layout="auto"}if(Teradata.isObject(this.layout)&&!this.layout.layout){this.layoutConfig=this.layout;this.layout=this.layoutConfig.type}if(Teradata.isString(this.layout)){this.layout=new Teradata.widget.Container.LAYOUTS[this.layout.toLowerCase()](this.layoutConfig)}this.setLayout(this.layout);if(!this.ownerCt){this.doLayout(false)}},initItems:function(){if(!this.items){this.items=[]}},doLayout:function(f){if(this.rendered&&this.layout){this.layout.layout();this.hasLayout=true}if(f!==true&&this.items){var d=this.items;for(var b=0,a=d.length;b<a;b++){var g=d[b];if(g.doLayout){g.doLayout(false)}}}if(this.rendered){this.onLayout(f)}},setLayout:function(a){if(this.layout&&this.layout!=a){this.layout.setContainer(null)}this.layout=a;this.initItems();a.setContainer(this)},add:function(b){this.initItems();var f=arguments.length>1;if(f||Teradata.isArray(b)){var a=[];var k=f?arguments:b;for(var g=0;g<k.length;g++){a.push(this.add(k[g]))}return a}var j=this.lookupComponent(b);var d=this.items.length;if(this.fireEvent("beforeadd",this,j,d)!==false&&this.onBeforeAdd(j)!==false){this.items.push(j);j.onAdded(this,d);this.onAdd(j);this.fireEvent("add",this,j,d)}return j},onAdd:Teradata.emptyFn,onBeforeAdd:function(a){if(a.ownerCt){a.ownerCt.remove(a,false)}if(this.hideBorders===true){a.border=(a.border===true)}},remove:function(a,b){this.initItems();var d=this.getComponent(a);if(d&&this.fireEvent("beforeremove",this,d)!==false){this.doRemove(d,b);this.fireEvent("remove",this,d)}return d},getComponent:function(a){this.initItems();for(var b=0;b<this.items.length;b++){if(Teradata.isString(a)){if(this.items[b].getId()==a){return this.items[b]}}else{if(this.items[b]==a){return a}}}},doRemove:function(f,d){var b=this.layout,a=b&&this.rendered;if(a){b.onRemove(f)}this.items.remove(f);f.onRemoved();this.onRemove(f);if(d===true||(d!==false&&this.autoDestroy)){f.destroy()}if(a){b.afterRemove(f)}},onRemove:Teradata.emptyFn,lookupComponent:function(a){if(Teradata.isString(a)){return Teradata.ComponentMgr.get(a)}else{if(!a.events){return this.createComponent(a)}}return a},createComponent:function(a,d){if(a.render){return a}var b=Teradata.create(Teradata.apply({ownerCt:this},a),d||this.defaultType);delete b.ownerCt;return b},getContentTarget:function(){return this.mc||this.el},getLayoutTarget:function(){return this.getContentTarget()},onLayout:Teradata.emptyFn});Teradata.widget.Container.LAYOUTS={};Teradata.reg("container",Teradata.widget.Container);
/*
 * Copyright 2012 By Teradata China Co.Ltd. All rights reserved
 * 
 * Created on 2012-02-09
 */
Teradata.widget.layout.AutoLayout=Teradata.extend(Object,{constructor:function(a){this.id=Teradata.id(null,"teradata-widget-layout-");Teradata.apply(this,a)},layout:function(){var a=this.container;var b=a.getLayoutTarget();this.onLayout(a,b);a.fireEvent("afterlayout",a,this)},onLayout:function(a,b){this.renderAll(a,b)},isValidParent:function(b,a){return a&&b.getEl().get(0).parentNode==a.get(0)},renderAll:function(f,g){var b=f.items,d,j,a=b.length;for(d=0;d<a;d++){j=b[d];if(j&&(!j.rendered||!this.isValidParent(j,g))){this.renderItem(j,d,g)}}},renderItem:function(d,a,b){if(d){if(!d.rendered){d.render(b,a);this.configureItem(d)}else{if(!this.isValidParent(d,b)){if(Teradata.isNumber(a)){a=b.get(0).childNodes[a]}b.get(0).insertBefore(d.getPositionEl().get(0),a||null);d.container=b;this.configureItem(d)}else{this.configureItem(d)}}}},configureItem:function(b){if(this.extraCls){var a=b.getPositionEl?b.getPositionEl():b;a.addClass(this.extraCls)}if(b.doLayout){b.doLayout()}},onRemove:function(b){if(this.activeItem==b){delete this.activeItem}if(b.rendered&&this.extraCls){var a=b.getPositionEl?b.getPositionEl():b;a.removeClass(this.extraCls)}},afterRemove:function(a){if(a.removeRestore){a.removeMode="container";delete a.removeRestore}},setContainer:function(a){this.container=a}});Teradata.widget.Container.LAYOUTS.auto=Teradata.widget.layout.AutoLayout;
/*
 * Copyright 2012 By Teradata China Co.Ltd. All rights reserved
 * 
 * Created on 2012-02-09
 */
Teradata.widget.layout.FormLayout=Teradata.extend(Teradata.widget.layout.AutoLayout,{columns:1,labelWidth:80,labelAlign:"right",fieldAlign:"left",separator:":",cellspacing:4,colspadding:0,onLayout:function(a,b){if(!this.el){this.el=Teradata.get(document.createElement("table"));this.tbody=Teradata.get(document.createElement("tbody"));this.el.attr("cellspacing",this.cellspacing);this.el.attr("colspadding",this.colspadding);this.el.addClass("teradata-layout-form");b.append(this.el);this.el.append(this.tbody)}Teradata.widget.layout.FormLayout.superclass.onLayout.apply(this,arguments)},renderItem:function(g,a,f){if(!g.rendered){var b=null;if(g.fieldLabel){b=Teradata.get(document.createElement("span"));b.html(g.fieldLabel+this.separator)}var d=this.nextCol(g);if(b){d[0].append(b)}else{d[0].html("&nbsp;")}Teradata.widget.layout.FormLayout.superclass.renderItem.call(this,g,a,d[1])}},nextCol:function(g){if(!Teradata.isNumber(this.curIndex)){this.curIndex=0}var i=this.curIndex%this.columns;if(i===0){this.curRow=Teradata.get(document.createElement("tr"));this.tbody.append(this.curRow)}var d=this.labelWidth+(Teradata.isNumber(g.width)?g.width:0);var a=parseInt(d/this.fieldMaxWidth,10)+1;var k=0;if(a>1&&d<this.el.width()){k=(a-1)*2+1;var f=this.curIndex%this.columns;if(f+a>this.columns){var l=Teradata.get(document.createElement("td"));l.addClass("teradata-layout-form-empty");l.attr("colspan",f*2);l.html("&nbsp;");this.curRow.append(l);this.curIndex+=f;return this.nextCol(g)}}var j=Teradata.get(document.createElement("td"));var b=Teradata.get(document.createElement("td"));j.addClass("teradata-layout-form-label");j.width(this.labelWidth);j.attr("align",this.labelAlign);j.attr("valign","middle");b.addClass("teradata-layout-form-field");b.attr("align",this.fieldAlign);b.attr("valign","middle");if(k>1){b.attr("colspan",Math.min(this.columns*2,k))}this.curRow.append(j);this.curRow.append(b);this.curIndex+=a;return[j,b]},setContainer:function(a){Teradata.widget.layout.FormLayout.superclass.setContainer.call(this,a);this.fieldMaxWidth=this.calculateFieldMaxWidth()},calculateFieldMaxWidth:function(){return this.container.getLayoutTarget().innerWidth()/this.columns}});Teradata.widget.Container.LAYOUTS.form=Teradata.widget.layout.FormLayout;
/*
 * Copyright 2012 By Teradata China Co.Ltd. All rights reserved
 * 
 * Created on 2012.05.03
 */
Teradata.widget.layout.BorderLayout=Teradata.extend(Teradata.widget.layout.AutoLayout,{southHeight:"20%",eastWidth:"20%",southHeight:"10%",westWidth:"20%",cellspacing:0,colspadding:0,constructor:function(a){this.regions={};Teradata.widget.layout.BorderLayout.superclass.constructor.call(this,a)},onLayout:function(a,c){if(!this.el){this.el=Teradata.get(document.createElement("table"));this.tbody=Teradata.get(document.createElement("tbody"));this.el.attr("cellspacing",this.cellspacing);this.el.attr("colspadding",this.colspadding);this.el.addClass("teradata-layout-border");c.append(this.el);this.el.append(this.tbody);this.regions.center=Teradata.get(document.createElement("td"));var b=document.createElement("tr");this.tbody.append(b);b.appendChild(this.regions.center.get(0))}Teradata.widget.layout.FormLayout.superclass.onLayout.apply(this,arguments)},renderItem:function(f,a,d){var b=this.getRegionEl(f.region);if(b!=null){Teradata.widget.layout.BorderLayout.superclass.renderItem.call(this,f,a,b)}if(this.regions.center&&this.regions.west&&this.regions.east){if(this.regions.noth){this.regions.noth.attr("colspan","3")}if(this.regions.south){this.regions.south.attr("colspan","3")}}else{if(this.regions.center&&this.regions.west){if(this.regions.noth){this.regions.noth.attr("colspan","2")}if(this.regions.south){this.regions.south.attr("colspan","2")}}}},configureItem:function(b){Teradata.widget.layout.BorderLayout.superclass.configureItem.call(this,b);var a=b.el.parent();b.setSize("auto",a.innerHeight())},getRegionEl:function(b){if(!this.regions[b]){if(b=="noth"){this.regions[b]=Teradata.get(document.createElement("td"));var a=document.createElement("tr");this.tbody.get(0).insertBefore(a,this.regions.center.parent().get(0));if(this.nothHeight){this.regions[b].css("height",this.nothHeight)}a.appendChild(this.regions[b].get(0))}else{if(b=="south"){this.regions[b]=Teradata.get(document.createElement("td"));var a=document.createElement("tr");this.tbody.get(0).appendChild(a);if(this.southHeight){this.regions[b].css("height",this.southHeight)}a.appendChild(this.regions[b].get(0))}else{if(b=="west"){this.regions[b]=Teradata.get(document.createElement("td"));var a=this.regions.center.parent().get(0);if(this.westWidth){this.regions[b].css("width",this.westWidth)}a.insertBefore(this.regions[b].get(0),this.regions.center.get(0))}else{if(b=="east"){this.regions[b]=Teradata.get(document.createElement("td"));var a=this.regions.center.parent().get(0);if(this.westWidth){this.regions[b].css("width",this.eastWidth)}a.appendChild(this.regions[b].get(0))}else{return null}}}}}return this.regions[b]}});Teradata.widget.Container.LAYOUTS.border=Teradata.widget.layout.BorderLayout;
/*
 * Copyright 2012 By Teradata China Co.Ltd. All rights reserved
 * 
 * Created on 2012-02-09
 */
Teradata.widget.layout.XBoxLayout=Teradata.extend(Teradata.widget.layout.AutoLayout,{horizontal:true,h:"center",v:"middle",onLayout:function(b,f){if(!this.el){var c=document.createElement("table");var a=document.createElement("tbody");var d=document.createElement("tr");var g=document.createElement("td");c.setAttribute("cellspacing","0");c.setAttribute("colspadding","0");c.appendChild(a);a.appendChild(d);d.appendChild(g);f.get(0).appendChild(c);this.el=Teradata.get(c);this.tdEl=Teradata.get(g);this.setAlign(this.align,this.valign);this.setHorizontal(this.horizontal);this.el.addClass("teradata-layout-x")}Teradata.widget.layout.XBoxLayout.superclass.onLayout.call(this,b,this.tdEl)},setAlign:function(b,a){if(h){this.el.attr("align",h)}if(v){this.el.attr("valign",v)}},setHAlign:function(a){this.setAlign(a)},setVAlign:function(a){this.setVAlign(undefined,a)},setHorizontal:function(a){this.horizontal=a;if(this.horizontal){this.el.addClass("teradata-layout-x-horizontal")}else{this.el.removeClass("teradata-layout-x-horizontal")}}});Teradata.widget.Container.LAYOUTS.xbox=Teradata.widget.layout.XBoxLayout;
/*
 * Copyright 2012 By Teradata China Co.Ltd. All rights reserved
 * 
 * Created on 2012.03.18
 */
Teradata.widget.layout.TabPanelLayout=Teradata.extend(Teradata.widget.layout.AutoLayout,{renderItem:function(j,a,f){var i=j.rendered;Teradata.widget.layout.TabPanelLayout.superclass.renderItem.apply(this,arguments);if(!i){var g=this.container;var d=g.getStrip();var b=new Teradata.widget.Button({text:j.title,autoWidth:true,handler:function(){var c=j;g.setActiveTab(c)}});b.render(d,a)}j.hide()},onRemove:function(f){var b=this.container;var a=b.items.indexOf(f);var d=b.headers[a];b.headers.remove(d);d.destroy();Teradata.widget.layout.TabPanelLayout.superclass.onRemove.call(this,f)}});Teradata.widget.Container.LAYOUTS.tabpanel=Teradata.widget.layout.TabPanelLayout;
/*
 * Copyright 2012 By Teradata China Co.Ltd. All rights reserved
 * 
 * Created on 2012-02-09
 */
Teradata.widget.Panel=Teradata.extend(Teradata.widget.Container,{width:600,bodyPadding:4,corners:"all",tbarAlign:"left",fbarAlign:"right",onRender:function(){Teradata.widget.Panel.superclass.onRender.apply(this,arguments);this.el.addClass("teradata-widget-panel");var g=this.top||this.el.children(".teradata-widget-panel-header")[0];var j=this.middle||this.el.children(".teradata-widget-panel-body")[0];var b=this.el.children(".teradata-widget-panel-tbar")[0];var m=this.el.children(".teradata-widget-panel-fbar")[0];var l=this.bottom||this.el.children(".teradata-widget-panel-footer")[0];if(!g){g=document.createElement("div")}if(!j){j=document.createElement("div")}if(!b&&this.menus){b=document.createElement("div");this.tbar=Teradata.get(b)}else{if(b&&!this.menus){b=Teradata.get(b);var k=b.find("teradata-widget-button");if(k.length>0){this.tbar=b;this.menus=[];for(var f=0;f<k.length;f++){this.menus.push({el:k[f]})}}}}if(!m&&this.buttons){m=document.createElement("div");this.fbar=Teradata.get(m)}else{if(m&&!this.buttons){m=Teradata.get(m);var k=m.find("teradata-widget-button");if(k.length>0){this.fbar=m;this.buttons=[];for(var f=0;f<k.length;f++){this.buttons.push({el:k[f]})}}}}if(!l){l=document.createElement("div")}this.header=Teradata.get(g);this.body=Teradata.get(j);this.footer=Teradata.get(l);if(!this.header.parent().get(0)){this.el.append(g)}if(!this.body.parent().get(0)){this.body.insertAfter(this.top||this.header)}if(this.tbar&&!this.tbar.parent().get(0)){this.tbar.addClass("teradata-widget-panel-tbar");this.tbar.insertBefore(this.body)}if(this.fbar&&!this.fbar.parent().get(0)){this.fbar.addClass("teradata-widget-panel-fbar");this.fbar.insertAfter(this.body)}if(!this.footer.parent().get(0)){this.footer.insertAfter(this.fbar||this.body)}this.header.addClass("teradata-widget-panel-header");this.body.addClass("teradata-widget-panel-body");this.footer.addClass("teradata-widget-panel-footer");if(this.bodyPadding){this.setBodyPadding(this.bodyPadding)}if(this.menus){for(var f=0;f<this.menus.length;f++){var a=this.menus[f];if(!Teradata.isFunction(a.render)){this.menus[f]=new Teradata.widget.Button(a)}if(this.menus[f].handler&&!this.menus[f].scope){this.menus[f].scope=this}if(a.el){this.menus[f].render()}else{this.menus[f].render(this.tbar)}}var d=document.createElement("div");this.tbarClear=Teradata.get(d);this.tbarClear.addClass("teradata-clear");this.tbar.append(this.tbarClear)}if(this.buttons){for(var f=0;f<this.buttons.length;f++){var a=this.buttons[f];if(!Teradata.isFunction(a.render)){this.buttons[f]=new Teradata.widget.Button(a)}if(this.buttons[f].handler&&!this.buttons[f].scope){this.buttons[f].scope=this}if(a.el){this.buttons[f].render()}else{this.buttons[f].render(this.fbar)}}var c=document.createElement("div");this.fbarClear=Teradata.get(c);this.fbarClear.addClass("teradata-clear");this.fbar.append(this.fbarClear)}if(this.hideHeader===true){this.header.hide()}if(this.title){this.setTitle(this.title)}else{if(this.getTitleEl()){this.title=this.getTitle()}}},afterRender:function(){Teradata.widget.Panel.superclass.afterRender.apply(this,arguments);this.initEvents()},initEvents:Teradata.emptyFn,setTitle:function(a){this.title=a;this.getTitleEl().html(a)},getTitle:function(){if(this.title){return this.title}return this.getTitleEl().html()},getTitleEl:function(){if(this.rendered){var a=this.header.find(".teradata-widget-tc").get(0)||this.header;return Teradata.get(a)}},getLayoutTarget:function(){return this.getContentTarget()},getContentTarget:function(){return this.mc||this.body},getBody:function(){return this.body},onResize:function(d,b,a,c){this.getContentTarget().height(b-this.header.outerHeight()-this.footer.outerHeight()-(this.tbar?this.tbar.outerHeight():0)-(this.fbar?this.fbar.outerHeight():0)-this.bodyPadding*2)},setBodyPadding:function(a){if(a instanceof Array){a=a.join("px ")}this.getContentTarget().css("padding",a+"px")}});Teradata.reg("panel",Teradata.widget.Panel);
/*
 * Copyright 2012 By Teradata China Co.Ltd. All rights reserved
 * 
 * Created on 2012-02-09
 */
Teradata.widget.TabPanel=Teradata.extend(Teradata.widget.Panel,{activeTab:0,corners:"b",tabPosition:"t",initComponent:function(){this.hideHeader=true;this.menus=this.tabPosition=="t";this.buttons=!this.menus;this.addEvents("beforetabchange","tabchange");Teradata.widget.TabPanel.superclass.initComponent.call(this)},onRender:function(){this.layout="tabpanel";Teradata.widget.TabPanel.superclass.onRender.apply(this,arguments);this.el.addClass("teradata-widget-tabpanel");this.strip=Teradata.get(document.createElement("div"));this.strip.addClass("teradata-widget-tabpanel-strip");var b=Teradata.get(document.createElement("div"));b.addClass("teradata-widget-tabpanel-strip-bottom");if(this.tabPosition=="t"){this.tbar.append(this.strip);this.tbar.append(b)}else{this.fbar.append(this.strip);this.fbar.append(b)}var a=Teradata.get(document.createElement("div"));a.addClass("teradata-clear");this.strip.append(a)},onBeforeAdd:function(b){var a=Teradata.widget.TabPanel.superclass.onBeforeAdd.call(this,b);if(a===false){return false}b.hideMode="visibility";b.autoWidth=true;b.autoHeight=true;return b.getXType()=="container"},getStrip:function(){return this.strip},setActiveTab:function(c){var b=null;if(!Teradata.isNumber(c)){b=c;c=this.items.indexOf(c);if(c==-1){c=this.getContentTarget().children().indexOf(b);if(c==-1){return null}else{b=this.items[c]}}}if(Teradata.isNumber(c)&&c!=-1){var d=this.getStrip().children()[c];if(d){d=Teradata.get(d)}else{return null}b=this.items[c];if(this.fireEvent("beforetabchange",this,b,c)!==false){if(this.activeTab){var a=this.activeTab;if(Teradata.isNumber(a)){a=this.items[a]}if(a){a.hide()}}b=b.getEl();this.getStrip().find(".teradata-widget-tabpanel-header-active").removeClass("teradata-widget-tabpanel-header-active");this.getContentTarget().children(".teradata-widget-tabpanel-container-active").removeClass("teradata-widget-tabpanel-container-active");d.addClass("teradata-widget-tabpanel-header-active");b.addClass("teradata-widget-tabpanel-container-active");this.activeTab=this.items[c];this.activeTab.show();this.fireEvent("tabchange",this,this.activeTab,c);return this.activeTab}}return null},onLayout:function(){Teradata.widget.TabPanel.superclass.onLayout.apply(this,arguments);this.setActiveTab(this.activeTab||0)}});Teradata.reg("tabpanel",Teradata.widget.TabPanel);
/*
 * Copyright 2012 By Teradata China Co.Ltd. All rights reserved
 * 
 * Created on 2012.03.21
 */
Teradata.widget.grid.Row=Teradata.extend(Object,{constructor:function(a){Teradata.apply(this,a);this.el={};this.render(this.index)},render:function(a){var c=this.grid.getColumns();if(this.createDom){for(var b=0;b<c.length;b++){var d=c[b];d.renderCell(this,a)}this.rendered=true;delete this.index}else{for(var b=0;b<c.length;b++){var d=c[b];this.el[d.getId()]=d.getCell(a)}this.rendered=true}},moveTo:function(a){this.render(a)},getIndex:function(){if(this.rendered){var b=this.grid.getRecordIndexedColumn();var a=this.el[b.getId()];return Teradata.indexOf(a,a.parentNode.childNodes)}else{if(Teradata.isNumber(this.index)){return this.index}}return -1},remove:function(a){for(var b in this.el){this.el[b].parentNode.removeChild(this.el[b])}if(a){delete this.grid;delete this.record}},getRecord:function(){var a=this.getRecordId();if(a){return this.grid.getStore().getById(a)}},getRecordId:function(){for(var a in this.el){var b=this.el[a].getAttribute("r");if(b){return b}}},addClass:function(a){for(var b in this.el){Teradata.get(this.el[b]).addClass(a)}},removeClass:function(a){for(var b in this.el){Teradata.get(this.el[b]).removeClass(a)}}});
/*
 * Copyright 2012 By Teradata China Co.Ltd. All rights reserved
 * 
 * Created on 2012.03.21
 */
Teradata.widget.grid.Column=Teradata.extend(Teradata.BoxComponent,{corners:"none",width:120,sortable:false,sortDirection:"none",boxMinWidth:40,resizable:true,initComponent:function(a){delete this.autoScroll;this.autoHeight=true;Teradata.widget.grid.Column.superclass.initComponent.call(this)},onRender:function(){Teradata.widget.grid.Column.superclass.onRender.apply(this,arguments);this.el.addClass("teradata-widget-gridpanel-column");this.header=Teradata.get(document.createElement("div"));this.header.addClass("teradata-widget-gridpanel-column-header");this.sortIcon=Teradata.get(document.createElement("a"));this.sortIcon.addClass("teradata-widget-gridpanel-column-header-sort-icon");this.headerInner=Teradata.get(document.createElement("div"));this.headerInner.addClass("teradata-widget-gridpanel-column-header-inner");this.headerText=Teradata.get(document.createElement("span"));this.header.insertBefore(this.ownerCt.getColumnsHeader().children().last());this.header.append(this.headerInner);this.headerInner.append(this.sortIcon);this.headerInner.append(this.headerText);this.setHeaderName(this.name);if(this.editor&&!(this.editor instanceof Teradata.widget.Field)){if(this.editor.xtype&&!Teradata.isFunction(this.editor.getXType)){this.editor=Teradata.create(this.editor);if(!(this.editor instanceof Teradata.widget.Field)){delete this.editor}}}},afterRender:function(){Teradata.widget.grid.Column.superclass.afterRender.apply(this,arguments);this.setSortable(this.sortable);this.setSortDirection(this.sortDirection);if(this.editor){this.editor.render(this.el)}this.initEvents();if(this.editor){var a=(this.editor.itemWrap||this.editor.el).get(0);a.parentNode.removeChild(a)}this.el.disableUserSelect()},initEvents:function(){this.bind(this.getHeader(),"click",function(a){if(this.disableOnceHeaderClick){delete this.disableOnceHeaderClick}else{this.onHeaderClick(a)}});if(this.editor){this.editor.on("blur",function(){this.stopCellEditing()},this)}this.bind(this.el,"dblclick",this.onBodyDblClick)},onHeaderClick:function(a){if(this.sortable&&a.target.className=="teradata-widget-gridpanel-column-header-sort-icon"){if(!this.sortDirection||this.sortDirection==="none"){this.setSortDirection("asc")}else{if(this.sortDirection==="asc"){this.setSortDirection("desc")}else{this.setSortDirection("none")}}this.getGrid().getStore().addSort({field:this.getField(),direction:this.sortDirection},true)}},onBodyDblClick:function(a){this.startCellEditing(a)},startCellEditing:function(d){if(this.editor){this.getGrid().stopKeyEventMonitoring();var c=this.getGrid();var a=Teradata.get(d.target);var g=c.getRowIndex(a);var f=c.getRowByIndex(g);var b=f.getRecord();a=Teradata.get(this.el.get(0).childNodes[g]);this.editingCellContent=a.html();a.html("");a.addClass("teradata-widget-gridpanel-cell-editing");a.append(this.editor.itemWrap||this.editor.el);this.editor.el.focus();this.editor.setValue(b.get(this.field));this.editor.setWidth(a.innerWidth());this.editingRecord=b;this.editingCell=a}},stopCellEditing:function(){var b=this.editor.getValue();var a=this.editingRecord;this.cancelCellEditing(b==this.editingCellContent);this.editor.setValue("");a.set(this.field,b)},cancelCellEditing:function(b){var a=(this.editor.itemWrap||this.editor.el).get(0);a.parentNode.removeChild(a);if(b){this.editingCell.html(this.editingCellContent)}this.editingCell.removeClass("teradata-widget-gridpanel-cell-editing");delete this.editingRecord;delete this.editingCellContent;delete this.editingCell;this.getGrid().startKeyEventMonitoring()},indexOfGrid:function(){return this.getGrid().getColumns().indexOf(this)},getIndex:function(){return this.ownerCt.items.indexOf(this)},onResize:function(a){Teradata.widget.grid.Column.superclass.onResize.apply(this,arguments);this.header.width(a);if(this.editor&&this.editingCell){this.editor.setWidth(a)}},renderCells:function(){var d=this.getGrid().getStore();var b=0;if(d&&(b=d.getCount())>0){var g=[];var a=this.isIndexed();var j=this.getCellStyleClass();for(var f=0;f<b;f++){var k=d.getAt(f);var c=k.get(this.field);if(a){if(j){g.push('<div class="teradata-widget-gridpanel-cell ');g.push(j);g.push('" r="')}else{g.push('<div class="teradata-widget-gridpanel-cell" r="')}g.push(k.id);g.push('">')}else{if(j){g.push('<div class="teradata-widget-gridpanel-cell ');g.push(j);g.push('">')}else{g.push('<div class="teradata-widget-gridpanel-cell">')}}if(Teradata.isFunction(this.cellRender)){g.push(this.cellRender.call(this,c))}else{g.push(c)}g.push("</div>")}g=g.join("");this.el.get(0).innerHTML=g}},renderCell:function(f,c){var a=f.el[this.getId()];var b=f.getRecord();if(!a){var d=this.getCellStyleClass();a=document.createElement("div");a.className=d?"teradata-widget-gridpanel-cell "+d:"teradata-widget-gridpanel-cell";if(this.isIndexed()){a.setAttribute("r",b.id)}}else{if(Teradata.isNumber(c)&&a.parentNode&&c>=0){a.parentNode.removeChild(a);var g=this.getContentTarget();if(Teradata.isNumber(c)&&(c=g.get(0).childNodes[c])){g.insertBefore(a,c)}else{g.append(a)}}}if(Teradata.isFunction(this.cellRender)){a.innerHTML=this.cellRender.call(this,b.get(this.field))}else{a.innerHTML=b.get(this.field)}f.el[this.getId()]=a},getCellStyleClass:function(){var a=this.getGrid().getStore().getFieldType(this.field);if(a=="number"){return"teradata-widget-gridpanel-cell-number"}},getCell:function(a){return this.el.get(0).childNodes[a]},isIndexed:function(){return this.field==this.getGrid().getStore().identifier||this.indexColumn},onDestroy:function(){this.header.remove();Teradata.widget.grid.Column.superclass.onDestroy.apply(this,arguments)},getHeader:function(){return this.header},setHeaderName:function(a){this.name=a;if(this.rendered){this.headerText.html(a)}},setSortable:function(a){this.sortable=a},setSortDirection:function(a){if(/^asc|desc|none$/i.test(a)&&this.sortable){a=a.toLowerCase();if(this.rendered){var b=this.getHeader();b.removeClass("teradata-widget-gridpanel-column-header-sort-"+this.sortDirection);b.addClass("teradata-widget-gridpanel-column-header-sort-"+a)}this.sortDirection=a}},getSort:function(){return{field:this.getField(),direction:this.sortDirection}},getField:function(){return this.field},getGrid:function(){return this.ownerCt.getGrid()},isSameGroup:function(a){return a&&this.ownerCt==a.ownerCt}});Teradata.reg("column",Teradata.widget.grid.Column);
/*
 * Copyright 2012 By Teradata China Co.Ltd. All rights reserved
 * 
 * Created on 2012.03.21
 */
Teradata.widget.grid.ColumnGroup=Teradata.extend(Teradata.widget.Container,{columnType:"column",columnGroupType:"columngroup",initComponent:function(){this.layout="auto";Teradata.widget.grid.ColumnGroup.superclass.initComponent.call(this)},onRender:function(){Teradata.widget.grid.ColumnGroup.superclass.onRender.apply(this,arguments);this.el.addClass("teradata-widget-gridpanel-columngroup");this.header=Teradata.get(document.createElement("div"));this.header.addClass("teradata-widget-gridpanel-column-header");this.header.addClass("teradata-widget-gridpanel-columngroup-header");this.headerInner=Teradata.get(document.createElement("div"));this.headerInner.addClass("teradata-widget-gridpanel-column-header-inner");this.headerInner.addClass("teradata-widget-gridpanel-columngroup-header-inner");this.headerText=Teradata.get(document.createElement("span"));this.header.insertBefore(this.ownerCt.getColumnsHeader().children().last());this.header.append(this.headerInner);this.headerInner.append(this.headerText);var a=document.createElement("div");a.className="teradata-clear";this.header.append(a);var a=document.createElement("div");a.className="teradata-clear";this.el.append(a);this.setHeaderName(this.name);if(this.hiddHeader){this.headerInner.addClass("teradata-hide-hidden")}},getColumnsHeader:function(){return this.header},setHeaderName:function(a){this.name=a;if(this.rendered){this.headerText.html(a)}},add:function(a){if(Teradata.isArray(a)){return Teradata.widget.grid.ColumnGroup.superclass.add.call(this,a)}if(!a.xtype&&!a.getXType){if(a.items){a.xtype=this.columnGroupType}else{a.xtype=this.columnType}}return Teradata.widget.grid.ColumnGroup.superclass.add.call(this,a)},onBeforeAdd:function(a){var b=Teradata.widget.grid.ColumnGroup.superclass.onBeforeAdd.call(this,a);if(b!==false){return a instanceof Teradata.widget.grid.Column||a instanceof Teradata.widget.grid.ColumnGroup}return false},getGrid:function(){if(this.ownerCt instanceof Teradata.widget.GridPanel){return this.ownerCt}else{return this.ownerCt.getGrid()}},doLayout:function(){Teradata.widget.grid.ColumnGroup.superclass.doLayout.apply(this,arguments);if(Teradata.isIE6){this.adjustHeaderWidth(false)}var a=this.getColumnsHeader().outerHeight()-(this.hiddHeader?0:this.headerInner.outerHeight());for(var b=0;b<this.items.length;b++){var c=this.items[b];if(c instanceof Teradata.widget.grid.Column){var d=parseInt((a-c.headerText.outerHeight())/2,10);c.headerInner.css("padding",[d,0,d,8,""].join("px "))}}},adjustHeaderWidth:function(d){if(this.rendered){var a=0;for(var b=0;b<this.items.length;b++){var c=this.items[b];if(c instanceof Teradata.widget.grid.ColumnGroup&&d!==false){c.adjustHeaderWidth()}a+=c.el.outerWidth();this.header.width(a)}}},getColumnIndex:function(a){if(a.is(".teradata-widget-gridpanel-column-header-inner")){return Teradata.indexOf(a.get(0).parentNode,a.get(0).parentNode.parentNode.childNodes)-1}else{return Teradata.indexOf(a.get(0),a.get(0).parentNode.childNodes)}},isSameGroup:function(a){return a&&this.ownerCt==a.ownerCt}});Teradata.reg("columngroup",Teradata.widget.grid.ColumnGroup);
/*
 * Copyright 2012 By Teradata China Co.Ltd. All rights reserved
 * 
 * Created on 2012.03.21
 */
Teradata.widget.grid.SelectionModel=Teradata.extend(Object,{rowSeparator:"\n",cellSeparator:"\t",init:function(a){this.grid=a;this.selectedRows=[];this.selectedColumns=[]},initEvents:function(){var a=this.grid.getColumnsBody();var b=this.grid.getColumnsHeader();this.grid.bind(a,"click",this.onColumnsBodyClick,this);this.grid.bind(b,"click",function(c){if(this.disableOnceHeaderClick){delete this.disableOnceHeaderClick}else{this.onColumnsHeaderClick(c)}},this);this.grid.bind(this.grid.keyEventMonitor,"keydown",this.onKeyDown,this)},onKeyDown:function(k){var a=k.keyCode;if(k.ctrlKey&&a==67){if(this.lastSelected=="row"&&this.selectedRows){var o=[];var c=this.grid.getColumns();for(var d=0;d<this.selectedRows.length;d++){var p=this.selectedRows[d];var g=p.getRecord();var l=[];for(var f=0;f<c.length;f++){var b=c[f];l.push(g.get(b.field))}o.push(l.join(this.cellSeparator))}o=o.join(this.rowSeparator);this.grid.keyEventMonitor.val(o);this.grid.keyEventMonitor.select()}else{if(this.lastSelected=="column"&&this.selectedColumns){var o=[];var n=this.grid.getStore();for(var f=0;f<n.getCount();f++){var l=[];for(var d=0;d<this.selectedColumns.length;d++){var b=this.selectedColumns[d];var m=n.getAt(f).get(b.field);l.push(m)}o.push(l.join(this.cellSeparator))}o=o.join(this.rowSeparator);this.grid.keyEventMonitor.val(o);this.grid.keyEventMonitor.select()}}}else{if(a==116){if(this.grid.store.url){this.grid.store.load()}k.preventDefault()}else{k.preventDefault()}}},onColumnsBodyClick:function(f){var j=Teradata.get(f.target);if(!j.is(".teradata-widget-gridpanel-column")){var g=this.grid.getRowIndex(j);if(f.shiftKey&&this.selectedRows.length>0){var b=this.selectedRows[0].getIndex();var a=Math.min(g,b);var c=Math.max(g,b);var l=[];for(var d=a;d<=c;d++){l.push(this.grid.getRowByIndex(d))}this.selectRow(l,true)}else{var k=this.grid.getRowByIndex(g);this.selectRow(k,!f.ctrlKey)}}this.lastSelected="row"},onColumnsHeaderClick:function(k){var c=this.grid.getColumns();var l=this.grid.getColumnIndexByMouseEvent(k);if(k.shiftKey&&this.selectedColumns.length>0){var d=this.selectedColumns[0].indexOfGrid();var a=Math.min(l,d);var f=Math.max(l,d);var j=[];console.log(a,f);for(var g=a;g<=f;g++){j.push(c[g])}this.selectColumn(j,true)}else{var b=c[l];this.selectColumn(b,!k.ctrlKey)}this.lastSelected="column"},selectRow:function(d,c,f,b){if(c){this.deselectRow(this.selectedRows)}if(Teradata.isArray(d)){for(var a=0;a<d.length;a++){this.selectRow(d[a],false,true,true)}this.selectedRows.sort(function(i,g){return i.getIndex()-g.getIndex()});if(!f){this.grid.fireEvent("selectrow",this.grid,d)}}else{if(this.selectedRows.indexOf(d)==-1){this.selectedRows.push(d);d.addClass("teradata-widget-gridpanel-row-selected");if(!b){this.selectedRows.sort(function(i,g){return i.getIndex()-g.getIndex()})}if(!f){this.grid.fireEvent("selectrow",this.grid,this.selectedRows)}}}},selectColumn:function(b,d,f,c){if(d){this.deselectColumn(this.selectedColumns)}if(Teradata.isArray(b)){for(var a=0;a<b.length;a++){this.selectColumn(b[a],false,true)}this.selectedColumns.sort(function(i,g){return i.indexOfGrid()-g.indexOfGrid()});if(!f){this.grid.fireEvent("selectcolumn",this.grid,b)}}else{this.selectedColumns.push(b);b.el.addClass("teradata-widget-gridpanel-column-selected");if(!c){this.selectedColumns.sort(function(i,g){return i.indexOfGrid()-g.indexOfGrid()})}if(!f){this.grid.fireEvent("selectcolumn",this.grid,b)}}},deselectRow:function(b,c){if(Teradata.isArray(b)){for(var a=b.length-1;a>=0;a--){this.deselectRow(b[a],true)}if(!c){this.grid.fireEvent("deselectrow",this.grid,b)}}else{this.selectedRows.remove(b);b.removeClass("teradata-widget-gridpanel-row-selected");if(!c){this.grid.fireEvent("deselectrow",this.grid,b)}}},clearSelectedRows:function(a,b){if(a){this.deselectRow(this.selectedRows,b)}else{this.selectedRows=[]}},deselectColumn:function(b,c){if(Teradata.isArray(b)){for(var a=b.length-1;a>=0;a--){this.deselectColumn(b[a],false,true)}}else{this.selectedColumns.remove(b);b.el.removeClass("teradata-widget-gridpanel-column-selected");if(!c){this.grid.fireEvent("deselectcolumn",this.grid,b)}}},getSelectedRows:function(){return this.selectedRows},getSelectedColumns:function(){return this.selectedColumns},destroy:function(){delete this.grid}});
/*
 * Copyright 2012 By Teradata China Co.Ltd. All rights reserved
 * 
 * Created on 2012.04.12
 */
Teradata.widget.grid.PaginationBar=Teradata.extend(Teradata.BoxComponent,{corners:"none",width:200,initComponent:function(){Teradata.widget.grid.PaginationBar.superclass.initComponent.call(this);this.num=new Teradata.widget.NumberField({submitValue:false,width:40,precision:0})},onRender:function(){Teradata.widget.grid.PaginationBar.superclass.onRender.apply(this,arguments);this.el.addClass("teradata-widget-gridpanel-paginationbar");this.first=Teradata.get(document.createElement("div"));this.prev=Teradata.get(document.createElement("div"));this.next=Teradata.get(document.createElement("div"));this.last=Teradata.get(document.createElement("div"));this.pages=Teradata.get(document.createElement("div"));this.first.addClass("teradata-widget-icon");this.prev.addClass("teradata-widget-icon");this.next.addClass("teradata-widget-icon");this.last.addClass("teradata-widget-icon");this.first.addClass("teradata-widget-grid-paginationbar-first");this.prev.addClass("teradata-widget-grid-paginationbar-prev");this.next.addClass("teradata-widget-grid-paginationbar-next");this.last.addClass("teradata-widget-grid-paginationbar-last");this.pages.addClass("teradata-widget-grid-paginationbar-pages");this.el.append(this.first);this.el.append(this.prev);this.el.append(this.next);this.el.append(this.last);this.num.render(this.el,4);this.el.append(this.pages)},afterRender:function(){Teradata.widget.grid.PaginationBar.superclass.afterRender.apply(this,arguments);this.initEvent()},initEvent:function(){this.bind(this.el,"click",this.onClick);this.num.on("keydown",this.onPageNumKeyDown,this)},onClick:function(b){if(!this.disabled){var a=Teradata.get(b.target);if(a.is(".teradata-widget-grid-paginationbar-first")){this.store.forwardPage(0)}else{if(a.is(".teradata-widget-grid-paginationbar-prev")){this.store.prevPage()}else{if(a.is(".teradata-widget-grid-paginationbar-next")){this.store.nextPage()}else{if(a.is(".teradata-widget-grid-paginationbar-last")){this.store.forwardPage(this.store.getPages()-1)}}}}}},onPageNumKeyDown:function(c,b){if(b.keyCode==13&&c.validate()){var a=parseInt(this.num.getValue(),10)-1;this.store.forwardPage(a)}},bindStore:function(a){if(this.store){this.store.un("load",this.update)}this.store=a;this.store.on("load",this.update,this)},update:function(){this.num.setValue(this.store.getCurrentPage()+1);this.pages.html(" / "+this.store.getPages())},disable:function(a){Teradata.widget.grid.PaginationBar.superclass.disable.apply(this,arguments);this.num.disable(a)}});
/*
 * Copyright 2012 By Teradata China Co.Ltd. All rights reserved
 * 
 * Created on 2012.03.21
 */
Teradata.widget.GridPanel=Teradata.extend(Teradata.widget.Panel,{defaultColumnEditor:"text",lazyRenderRows:false,columnType:"column",columnGroupType:"columngroup",pagination:false,autoLoad:true,initComponent:function(){this.addEvents("selectrow","selectcolumn","deselectrow","deselectcolumn");this.bodyPadding=0;delete this.items;this.layout="auto";this.autoScroll=!this.autoHeight;Teradata.widget.GridPanel.superclass.initComponent.call(this);this.rowMap={};this.columnsRoot=new Teradata.widget.grid.ColumnGroup({hiddHeader:true});this.add(this.columnsRoot);var a=this.columns;delete this.columns;this.columnsRoot.add(a);if(!this.hasRecordIndexedColumn()){this.getColumns()[0].indexColumn=true}if(!this.selectionModel||!(this.selectionModel instanceof Teradata.widget.grid.SelectionModel)){this.selectionModel=new Teradata.widget.grid.SelectionModel()}this.selectionModel.init(this);if(this.pagination){this.buttons=this.buttons||[];this.paginationBar=new Teradata.widget.grid.PaginationBar();this.buttons.splice(0,0,this.paginationBar)}},onRender:function(){Teradata.widget.GridPanel.superclass.onRender.apply(this,arguments);this.el.addClass("teradata-widget-gridpanel");var c=Teradata.get(document.createElement("div"));c.addClass("teradata-widget-gridpanel-columns-header-bar");var g=Teradata.get(document.createElement("div"));g.addClass("teradata-widget-gridpanel-columns-header-wrap");var d=Teradata.get(document.createElement("div"));d.addClass("teradata-widget-gridpanel-columns-header");var b=Teradata.get(document.createElement("div"));b.addClass("teradata-widget-gridpanel-columns-body");var j=Teradata.get(document.createElement("div"));j.addClass("teradata-widget-gridpanel-column-resizeline-wrap");var i=Teradata.get(document.createElement("div"));i.addClass("teradata-widget-gridpanel-column-move-wrap");var f=Teradata.get(document.createElement("div"));f.addClass("teradata-widget-gridpanel-column-resizeline");c.insertBefore(this.getBody());c.append(g);j.insertBefore(g);i.insertBefore(g);j.append(f);g.append(d);this.getContentTarget().append(b);this.columnsHeaderWrap=g;this.columnsHeader=d;this.columnResizeLine=f;this.columnMoveDragDropElWrap=i;this.columnsBody=b;var a=document.createElement("div");a.className="teradata-clear";this.getLayoutTarget().append(a);a=document.createElement("div");a.className="teradata-clear";this.columnsHeader.append(a);this.keyEventMonitor=Teradata.get(document.createElement("textarea"));this.keyEventMonitor.addClass("teradata-widget-gridpanel-key-event-monitor");this.columnsBody.append(this.keyEventMonitor)},afterRender:function(){Teradata.widget.GridPanel.superclass.afterRender.apply(this,arguments);if(!this.store&&this.fields){this.store=new Teradata.data.Store({fields:this.getColumnFields()})}if(this.store){this.bindStore(this.store);if(this.datas){this.store.loadData(this.datas)}else{if(this.store.url&&this.autoLoad){this.store.load()}}}},getColumnFields:function(){var a=[];for(var b=0;b<this.columns.length;b++){var c=this.columns[b];a.push({name:c.field,type:c.type})}return a},initEvents:function(){Teradata.widget.GridPanel.superclass.initEvents.apply(this,arguments);this.selectionModel.initEvents(this);var a=this.getColumnsBody();var b=this.getColumnsHeader();this.bind(this.getContentTarget(),"scroll",this.onScroll);this.bind(a,"mouseover",this.onRowMouseOver);this.bind(a,"mouseout",this.onMouseOut);this.bind(this.el,"mousemove",this.onMouseMove);this.bind(b,"mousedown",this.onHeaderMouseDown);this.bind(this.el,"mouseup",this.onHeaderMouseUp);this.bind(this.el,"mousewheel",function(){if(this.movingColumn||this.resizingColumn){e.preventDefault()}});this.el.children().find(".teradata-widget-gridpanel-columns-header-bar").disableUserSelect();this.bind(a,"click",function(c){if(!this.suspendedKeyEventMonitoring){this.keyEventMonitor.select()}});this.bind(b,"click",function(c){if(!this.suspendedKeyEventMonitoring){this.keyEventMonitor.select()}})},stopKeyEventMonitoring:function(){this.suspendedKeyEventMonitoring=true},startKeyEventMonitoring:function(){this.suspendedKeyEventMonitoring=false},onRowMouseOver:function(b){b.stopPropagation();if(!this.resizingColumn&&!this.movingColumn&&b.target.className=="teradata-widget-gridpanel-cell"){var a=Teradata.get(b.target);if(!b.target.className||b.target.className.indexOf("teradata-widget-gridpanel-row-hover")==-1){var d=this.getRowIndex(a);var c=this.getRowByIndex(d);c.addClass("teradata-widget-gridpanel-row-hover");if(this.hoverRow){this.hoverRow.removeClass("teradata-widget-gridpanel-row-hover")}this.hoverRow=c}}},onMouseOut:function(g){g.stopPropagation();if(!this.resizingColumn&&!this.movingColumn){if(this.hoverRow&&g.relatedTarget&&(!g.relatedTarget.className||g.relatedTarget.className.indexOf("teradata-widget-gridpanel-row-hover")==-1)){this.hoverRow.removeClass("teradata-widget-gridpanel-row-hover");delete this.hoverRow}}else{var a=g.pageX;var i=g.pageY;var f=this.ddRegion.top;var d=this.ddRegion.left;var c=this.ddRegion.right;var b=this.ddRegion.bottom;if(a<d||a>c||i<f||i>b){this.cancelColumnMove();this.cancelColumnResize()}}},onMouseMove:function(f){f.preventDefault();f.stopPropagation();var a=f.pageX;var d=Teradata.get(f.target);if(d.is(".teradata-widget-gridpanel-column-header-inner span")){d=d.parent()}if(this.resizingColumn){var c=a-this.getBody().offset().left;this.columnResizeLineMoved=true;this.columnResizeLine.css("left",c)}else{if(this.columnMoveReady){if(!this.movingColumn){this.startColumnMove(f);var c=a-this.getBody().offset().left;this.columnMoveDragDropEl.css("left",c)}else{var c=a-this.getBody().offset().left;this.columnMoveDragDropEl.css("left",c)}}else{if(d.is(".teradata-widget-gridpanel-column-header-inner")){var i=d;if(i.get(0)){var g=i.offset();if(a>=g.left+i.outerWidth()-6&&a<=g.left+i.outerWidth()){var b=this.getColumns()[this.getColumnIndexByMouseEvent(f)];if(b&&b.resizable){this.columnsHeader.addClass("teradata-widget-gridpanel-column-header-resize");this.el.get(0).style.cursor="e-resize";this.columnResizeReady=true}}else{this.columnsHeader.removeClass("teradata-widget-gridpanel-column-header-resize");this.el.get(0).style.cursor="";delete this.columnResizeReady}}}else{if(!this.resizingColumn){this.columnsHeader.removeClass("teradata-widget-gridpanel-column-header-resize");this.el.get(0).style.cursor=""}}}}},onHeaderMouseDown:function(c){c.preventDefault();this.handleColumn=this.getColumns()[this.getColumnIndexByMouseEvent(c)];if(this.handleColumn){var a=Teradata.get(c.target);if(a.is("span")){a=a.parent()}if(this.handleColumn.headerInner.get(0)!=a.get(0)){var b=this.handleColumn;while((b=b.ownerCt)!=this.columnsRoot){if(b.headerInner.get(0)==a.get(0)){this.handleColumnGroup=b}}}if(this.columnResizeReady){this.startColumnResize(c)}else{this.columnMoveReady=true}}},onHeaderMouseUp:function(a){if(this.resizingColumn){if(this.getColumns()[this.getColumnIndexByMouseEvent(a)]==this.resizingColumn){this.resizingColumn.disableOnceHeaderClick=true;this.selectionModel.disableOnceHeaderClick=true}this.stopColumnResize(a)}if(this.movingColumn){if(this.getColumns()[this.getColumnIndexByMouseEvent(a)]==this.movingColumn){this.movingColumn.disableOnceHeaderClick=true;this.selectionModel.disableOnceHeaderClick=true}this.stopColumnMove(a)}delete this.columnMoveReady;delete this.handleColumn;delete this.handleColumnGroup},onScroll:function(b){var a=this.getContentTarget().scrollLeft();if(a!=this.lastColumnsHeaderLeft){this.columnsHeader.css("left",a*-1+"px");this.lastColumnsHeaderLeft=a}},startColumnMove:function(a){this.movingColumn=this.handleColumnGroup||this.handleColumn;this.ddRegion=this.el.region();var c=this.movingColumn.header.clone();this.columnMoveDragDropEl=Teradata.get(document.createElement("div"));this.columnMoveDragDropEl.addClass("teradata-widget-gridpanel-column-header-move");this.columnMoveDragDropEl.append(c);this.columnMoveDragDropEl.width(this.movingColumn.header.outerWidth());this.columnMoveDragDropElWrap.append(this.columnMoveDragDropEl);var b=new Teradata.Shadow();b.applyTo(c)},stopColumnMove:function(j){if(this.movingColumn){var b=this.movingColumn.ownerCt.items;var l=b.indexOf(this.movingColumn);var d=this.getColumnIndexByMouseEvent(j,this.movingColumn.ownerCt);if(Teradata.isNumber(d)){var k=b[d];var m=j.pageX;var g=k.el.offset().left+k.el.outerWidth()/2;var i=null;if(m>g){i="insertAfter"}else{i="insertBefore"}if(d!=l&&this.movingColumn.isSameGroup(k)){var f=this.movingColumn.el.get(0);var n=this.movingColumn.header.get(0);var a=k.el;var c=k.header;f.parentNode.removeChild(f);n.parentNode.removeChild(n);this.movingColumn.el[i](a);this.movingColumn.header[i](c);this.movingColumn.ownerCt.items.remove(this.movingColumn);this.movingColumn.ownerCt.items.splice(d>l?d-1:d,0,this.movingColumn)}}this.cancelColumnMove()}},cancelColumnMove:function(){if(this.movingColumn){delete this.columnMoveReady;delete this.movingColumn;this.columnMoveDragDropEl.remove();delete this.columnMoveDragDropEl;delete this.ddRegion}},startColumnResize:function(c){var a=this.handleColumn;this.ddRegion=this.el.region();var b=a.el.offset();this.startColumnResizeX=b.left+a.el.outerWidth()-c.pageX;this.columnResizeLine.height(this.getBody().outerHeight()+this.columnsHeaderWrap.outerHeight());this.columnResizeLine.css("left",b.left-this.getBody().offset().left+a.el.outerWidth()-2);this.resizingColumn=a},stopColumnResize:function(b){if(this.resizingColumn&&this.columnResizeLineMoved){var a=Math.max(b.pageX-this.resizingColumn.el.offset().left,this.resizingColumn.boxMinWidth);this.resizingColumn.setWidth(a+this.startColumnResizeX);this.adjustColumnsWrapSize();delete this.lastColumnsHeaderLeft;this.onScroll(b)}this.cancelColumnResize()},cancelColumnResize:function(){if(this.resizingColumn){this.columnResizeLine.css("left",-1);delete this.resizingColumn;delete this.startColumnResizeX;delete this.ddRegion;delete this.columnResizeLineMoved;this.columnsHeader.removeClass("teradata-widget-gridpanel-column-header-resize");this.el.get(0).style.cursor=""}},getColumnIndexByMouseEvent:function(k,j){var a=k.pageX;var c=j?j.items:this.getColumns();for(var b=0;b<c.length;b++){var d=c[b];var g=d.el.offset().left;var f=g+d.el.outerWidth();if(a>g&&a<f){return b}}},getRowIndex:function(a){if(!a.is(".teradata-widget-gridpanel-cell")){a=a.parents(".teradata-widget-gridpanel-cell").first()}var c=a.offset().top;var d=a.parents(".teradata-widget-gridpanel-column").first().offset().top;var b=parseInt(Math.abs(c-d)/a.outerHeight(),10);return b},bindStore:function(){var b=function(i,g){this.update.call(this,"clear",i,g)};var a=function(i,g){this.update.call(this,"remove",i,g)};var d=function(i,g){this.update.call(this,"add",i,g)};var c=function(i,g){this.update.call(this,"load",i,g);this.loadingMask(false)};var f=function(i,g){this.update.call(this,"update",i,g)};return function(g){if(this.store){this.store.un("clear",b);this.store.un("remove",a);this.store.un("add",d);this.store.un("load",c);this.store.un("update",f);this.store.un("beforeload",this.loadingMask)}this.store=g;this.store.on("clear",b,this);this.store.on("remove",a,this);this.store.on("add",a,this);this.store.on("beforeload",this.loadingMask,this);this.store.on("load",c,this);this.store.on("update",f,this);if(this.pagination){this.paginationBar.bindStore(g)}}}(),loadingMask:function(a,b){if(a!==false){this.getBody().loadingMask(b||this.loadingText);this.paginationBar.disable(true)}else{this.getBody().unmask();this.paginationBar.disable(false)}},update:function(b,c,a){var f=this.getColumns();if(a instanceof Array){if(b=="clear"){this.rowMap={};this.selectionModel.clearSelectedRows();for(var d=0;d<f.length;d++){f[d].el.html("")}}else{if(b=="load"){for(var d=0;d<f.length;d++){f[d].renderCells()}}else{for(var d=0;d<a.length;d++){this.update(b,c,a[d])}}}}else{if(b=="add"){var g=this.createRow(a);for(var d=0;d<f.length;d++){f[d].renderCell(g)}}else{if(b=="remove"){var g=this.getRowById(a.id);delete this.rowMap[a.id];this.selectionModel.deselectRow(g,true);g.remove(true)}else{if(b=="update"){var g=this.getRowById(a.id);for(var d=0;d<f.length;d++){f[d].renderCell(g)}}}}}},getRowCount:function(){return this.store.getCount()},getRowByIndex:function(b){if(b<0||b>=this.getRowCount()){return null}var c=new Teradata.widget.grid.Row({grid:this,index:b});var d=c.getRecordId();var a=this.rowMap[d];if(a){return a}else{this.rowMap[d]=c}return c},getRowById:function(f){var d=this.rowMap[f];if(d){return d}var c=this.getRecordIndexedColumn();var a=c.el.children('div[r="'+f+'"]').first();if(a){var b=this.getRowIndex(a);d=this.getRowByIndex(b);return d}},getColumns:function(){var b=function(f){if(!(f instanceof Teradata.widget.grid.Column)&&Teradata.isArray(f.items)){var d=[];for(var c=0;c<f.items.length;c++){d=d.concat(b(f.items[c]))}return d}else{return[f]}};var a=function(){return b(this.columnsRoot)};return a}(),onBeforeAdd:function(a){var b=Teradata.widget.GridPanel.superclass.onBeforeAdd.call(this,a);if(b!==false){return a instanceof Teradata.widget.grid.Column||a instanceof Teradata.widget.grid.ColumnGroup}return false},add:function(a){if(Teradata.isArray(a)){return Teradata.widget.GridPanel.superclass.add.call(this,a)}if(!a.xtype&&!a.getXType){if(a.items){a.xtype=this.columnGroupType}else{a.xtype=this.columnType}}return Teradata.widget.GridPanel.superclass.add.call(this,a)},createRow:function(a){var b=this.store.getById(a.id);if(!b){this.store.add(a,true)}else{a=b}var c=new Teradata.widget.grid.Row({grid:this,record:a});return c},removeRowById:function(c,a){var b=this.getRowById(c);if(b){delete this.rowMap[c];b.remove(a)}},removeRowByIndex:function(a,b){var c=this.getRowByIndex(a);if(c){delete this.rowMap[c.getRecordId()];c.remove(b)}},getColumnsHeader:function(){return this.columnsHeader},getLayoutTarget:function(){return this.getColumnsBody()},getColumnsBody:function(){return this.columnsBody},getStore:function(){return this.store},onResize:function(a){Teradata.widget.GridPanel.superclass.onResize.apply(this,arguments);this.adjustColumnsWrapSize()},doLayout:function(){Teradata.widget.GridPanel.superclass.doLayout.apply(this,arguments);this.adjustColumnsWrapSize()},adjustColumnsWrapSize:function(){var a=this.getColumnsWidth();var b=this.getContentTarget();this.columnsHeader.width(a+20);this.columnsBody.width(a);if(Teradata.isIE6){this.columnsRoot.adjustHeaderWidth()}b.height(this.el.innerHeight()-this.columnsHeader.outerHeight()-(this.top?this.top.outerHeight():0)-(this.bottom?this.bottom.outerHeight():0)-(this.tbar?this.tbar.outerHeight():0)-(this.fbar?this.fbar.outerHeight():0))},getColumnsWidth:function(){var a=0;var c=this.getColumns();for(var b=0;b<c.length;b++){var d=c[b];a+=d.rendered?d.el.outerWidth():d.width}return a},getRecordIndexedColumn:function(){var b=this.getColumns();for(var a=0;a<b.length;a++){if(b[a].isIndexed()){return b[a]}}},onDestroy:function(){Teradata.widget.GridPanel.superclass.onDestroy.apply(this,arguments);this.store.destroy();delete this.store;delete this.rowMap},hasRecordIndexedColumn:function(){var b=this.getColumns();for(var a=0;a<b.length;a++){if(b[a].isIndexed()){return true}}return false}});Teradata.reg("grid",Teradata.widget.GridPanel);
/*
 * Copyright 2012 By Teradata China Co.Ltd. All rights reserved
 * 
 * Created on 2012-03-14
 */
Teradata.widget.FormPanel=Teradata.extend(Teradata.widget.Panel,{layout:"form",method:"GET",fileUpload:false,initComponent:function(){this.addEvents("reset","submit");this.fields=[];Teradata.widget.FormPanel.superclass.initComponent.call(this)},onRender:function(){Teradata.widget.FormPanel.superclass.onRender.apply(this,arguments);var c=Teradata.get(document.createElement("form"));if(this.action){c.attr("action",this.action)}c.attr("method",this.method);if(this.fileUpload){c.attr("enctype","multipart/form-data")}this.getContentTarget().append(c);this.form=c;if(this.buttons&&this.buttons.length>0){for(var b=0;b<this.buttons.length;b++){var a=this.buttons[b];if(a.action=="submit"){a.handler=this.submit.createDelegate(this)}else{if(a.action=="reset"){a.handler=this.reset.createDelegate(this)}}}}},initEvents:function(){Teradata.widget.FormPanel.superclass.initEvents.call(this);this.bind(this.form,"reset",this.onReset);this.bind(this.form,"submit",this.onSubmit)},onReset:function(){if(this.fireEvent("reset",this)!==false){var a=this.getFields();for(var b=0;b<a.length;b++){var c=a[b];c.setValue(c.originalValue)}}return false},onSubmit:function(){return this.fireEvent("submit",this)!==false},findFields:function(b){var a=[];if(b instanceof Teradata.widget.Container&&!(b instanceof Teradata.widget.GridPanel)){for(var c=0;c<b.items.length;c++){var d=this.findFields(b.items[c]);a=a.concat(d)}}else{if(b instanceof Teradata.widget.Field){return b}}return a},getLayoutTarget:function(){return this.form||Teradata.widget.FormPanel.superclass.getContentTarget.call(this)},getFields:function(){return this.findFields(this)},submit:function(){if(this.rendered&&this.validate()){this.form.get(0).submit()}},reset:function(){if(this.rendered){this.form.get(0).reset()}},getValues:function(){var a=this.getFields();var b={};for(var d=0;d<a.length;d++){var f=a[d];var c=f.getName();if(c){b[c]=f.getValue()}}return b},validate:function(){var a=this.getFields();var d=true;for(var b=0;b<a.length;b++){var c=a[b];if(!c.validate()){d=false}}return d}});Teradata.reg("form",Teradata.widget.FormPanel);
/*
 * Copyright 2012 By Teradata China Co.Ltd. All rights reserved
 * 
 * Created on 2012.04.19
 */
Teradata.widget.tree.Loader=Teradata.extend(Teradata.util.Observable,{constructor:function(a){Teradata.apply(this,a);this.addEvents("beforeload","load")},load:function(c,a){for(var b=0;b<a.length;b++){var d=this.createNode(a[b]);c.appendChild(d);if(d.json.children){this.load(d,d.json.children)}}},createNode:function(a){return new Teradata.widget.tree.Node(a)}});
/*
 * Copyright 2012 By Teradata China Co.Ltd. All rights reserved
 * 
 * Created on 2012.04.19
 */
Teradata.widget.tree.Node=Teradata.extend(Object,{constructor:function(a){Teradata.widget.tree.Node.superclass.constructor.call(this,a);this.getId();if(a){this.text=a.text||"";delete a.text;this.json=a;this.id=a.id}this.childNodes=[]},render:function(g,a){if(!this.rendered){this.el=Teradata.get(document.createElement("div"));this.el.addClass("teradata-widget-treepanel-node");this.el.addClass("teradata-widget-treepanel-node-leaf");var d=['<div class="teradata-widget-treepanel-node-inner">','<a class="teradata-widget-treepanel-node-elbow" href="#"></a>','<div class="teradata-widget-treepanel-node-icon"></div>','<span class="teradata-widget-treepanel-node-text"></span>','<div class="teradata-clear"></div>',"</div>",'<div class="teradata-widget-treepanel-node-children"></div>'].join("");this.el.html(d);var c=this.el.children();this.innerEl=Teradata.get(c[0]);this.childrenEl=Teradata.get(c[1]);c=this.innerEl.children();this.elbowEl=Teradata.get(c[0]);this.iconEl=Teradata.get(c[1]);this.textEl=Teradata.get(c[2]);this.initEvents();this.rendered=true;this.el.attr("id",this.id)}else{var f=this.el.get(0);f.parentNode.removeChild(f)}var b=null;if(g instanceof Teradata.widget.TreePanel){b=g.getContentTarget();this.tree=g}else{b=g.childrenEl;this.parentNode=g}if(b){if(Teradata.isNumber(a)){a=b.children()[a]}if(a){this.el.insertBefore(a)}else{b.append(this.el)}}this.getTree().addNode(this);this.setText(this.text)},initEvents:function(){this.elbowEl.on("click",function(a){a.preventDefault();if(this.expanded){this.collapse()}else{this.expand()}}.createDelegate(this))},getId:function(){if(this.el&&!this.id){this.id=this.el.attr("comp-id")||this.el.attr(this.idAttr)}return this.id?this.id:(this.id="teradata-tree-node-"+Teradata.ComponentMgr.generateId())},isLeaf:function(){return this.childNodes.length==0},isRoot:function(){return this.parentNode==null},getTree:function(){return this.isRoot()?this.tree:this.parentNode.getTree()},hide:function(){this.el.hidd()},appendChild:function(b){var a=this.childNodes[this.childNodes.length-1];if(a){a.innerEl.removeClass("teradata-widget-treepanel-node-inner-last");a.childrenEl.removeClass("teradata-widget-treepanel-node-children-last")}if(this.childNodes.length==0){this.el.removeClass("teradata-widget-treepanel-node-leaf");if(!this.expanded){this.el.addClass("teradata-widget-treepanel-node-collapsed")}}this.childNodes.push(b);b.render(this);b.innerEl.addClass("teradata-widget-treepanel-node-inner-last");b.childrenEl.addClass("teradata-widget-treepanel-node-children-last")},expand:function(){if(!this.isLeaf()||this.isRoot()){this.el.removeClass("teradata-widget-treepanel-node-collapsed");this.expanded=true;var a=this.getTree();a.fireEvent("expand",a,this)}},collapse:function(){if(!this.isLeaf()||this.isRoot()){this.el.addClass("teradata-widget-treepanel-node-collapsed");this.expanded=false;var a=this.getTree();a.fireEvent("collapse",a,this)}},setText:function(a){this.text=a;if(this.rendered){this.textEl.html(this.text);this.textEl.width(this.textEl.width());this.innerEl.width(this.elbowEl.outerWidth()+this.iconEl.outerWidth()+this.textEl.outerWidth())}},remove:function(){this.el.remove()}});
/*
 * Copyright 2012 By Teradata China Co.Ltd. All rights reserved
 * 
 * Created on 2012.04.21
 */
Teradata.widget.tree.SelectionModel=Teradata.extend(Object,{singleSelect:true,constructor:function(a){Teradata.apply(this,a)},initEvents:function(){this.tree.bind(this.tree.getContentTarget(),"click",this.onNodeClick,this)},onNodeClick:function(c){var b=Teradata.get(c.target);if(b.is(".teradata-widget-treepanel-node-text")||b.is(".teradata-widget-treepanel-node-icon")){var d=b.parent().parent().attr("id");var a=this.tree.getNode(d);if(a){if(a.selected){this.deselect(a)}else{this.select(a)}}}},select:function(b,c){if(b){if(b instanceof Array){for(var a=0;a<b.length;a++){this.select(b[a],true);if(this.singleSelect){break}}}else{if(this.singleSelect){this.clearSelection()}b.selected=true;b.innerEl.addClass("teradata-widget-treepanel-node-inner-selected")}if(!c){this.tree.fireEvent("select",this.tree,b)}}},deselect:function(b,c){if(b){if(b instanceof Array){for(var a=0;a<b.length;a++){this.deselect(b[a],true)}}else{b.selected=false;b.innerEl.removeClass("teradata-widget-treepanel-node-inner-selected")}if(!c){this.tree.fireEvent("deselect",this.tree,b)}}},clearSelection:function(){var b=[];for(var a in this.tree.nodes){if(this.tree.nodes[a].selected){b.push(this.tree.nodes[a])}}this.deselect(b)}});
/*
 * Copyright 2012 By Teradata China Co.Ltd. All rights reserved
 * 
 * Created on 2012.04.19
 */
Teradata.widget.tree.StoreLoader=Teradata.extend(Teradata.widget.tree.Loader,{parentField:"parentId",textField:"text",load:function(f,b){var a=b.findBy(this.parentField,f.id);for(var c=0;c<a.length;c++){var d=a[c];var g=this.createNode(d);f.appendChild(g);this.load(g,b)}},createNode:function(b){var a={id:b.id,text:b.get(this.textField),record:b};return Teradata.widget.tree.StoreLoader.superclass.createNode.call(this,a)}});
/*
 * Copyright 2012 By Teradata China Co.Ltd. All rights reserved
 * 
 * Created on 2012.04.16
 */
Teradata.widget.TreePanel=Teradata.extend(Teradata.widget.Panel,{hiddRoot:true,initComponent:function(){this.nodes={};this.addEvents("expand","collapse","beforeremove","remove","select","deselect");Teradata.widget.TreePanel.superclass.initComponent.call(this);if(!this.rootNode){this.rootNode=new Teradata.widget.tree.Node();this.hiddRoot=true}if(!this.loader&&this.store){this.loader=new Teradata.widget.tree.StoreLoader(this.loaderCfg)}else{if(!this.loader){this.loader=new Teradata.widget.tree.Loader(this.loaderCfg)}}if(!this.selectionModel){this.selectionModel=new Teradata.widget.tree.SelectionModel({tree:this})}else{this.selectionModel.tree=this}},onRender:function(){Teradata.widget.TreePanel.superclass.onRender.apply(this,arguments);this.el.addClass("teradata-widget-treepanel");this.rootNode.render(this);if(this.hiddRoot){this.rootNode.innerEl.hide();this.rootNode.childrenEl.css("padding-left",0);this.rootNode.expand()}},afterRender:function(){Teradata.widget.TreePanel.superclass.afterRender.apply(this,arguments);if(this.datas){this.loader.load(this.rootNode,this.datas)}else{if(this.store){this.bindStore(this.store);this.store.load()}}},bindStore:function(){var c=function(i,g){this.loader.load(this.rootNode,i)};var b=function(k,g){var j=this.rootNode.childNodes;for(var l=0;l<j.length;l++){var m=j[l];this.removeNode(m)}};var d=function(j,g){if(!(g instanceof Array)){g=[g]}var k=this.getNode(g.get(this.loader.parentField));if(k){for(var l=0;l<g.length;l++){var m=this.loader.createNode(g[l]);k.appendChild(m)}}};var f=function(i,g){var j=this.getNode(g.id);if(j){j.setText(g.get(this.loader.textField))}};var a=function(j,g){for(var k=0;k<g.length;k++){var l=g[k];var m=this.getNode(l.id);if(m){this.removeNode(m)}}};return function(g){if(this.store){this.store.un("load",c);this.store.un("clear",b);this.store.un("add",d);this.store.un("update",f);this.store.un("remove",a)}this.store=g;this.store.on("load",c,this);this.store.on("clear",b,this);this.store.on("add",d,this);this.store.on("update",f,this);this.store.on("remove",a,this)}}(),initEvents:function(){this.selectionModel.initEvents()},addNode:function(a){this.nodes[a.id]=a},getNode:function(a){return this.nodes[a]},removeNodeById:function(b){var a=this.getNode(b);this.removeNode(a)},removeNode:function(b){if(b&&b.getTree()==this){if(b.childNodes){for(var a=0;a<b.childNodes.length;a++){this.removeNode(b.childNodes[a])}}delete this.nodes[b.id];b.remove()}}});Teradata.reg("tree",Teradata.widget.TreePanel);
/*
 * Copyright 2012 By Teradata China Co.Ltd. All rights reserved
 * 
 * Created on 2012-02-09
 */
Teradata.widget.Field=Teradata.extend(Teradata.BoxComponent,{autoEl:"input",inputType:"hidden",validationEvent:"blur",validation:true,width:120,height:32,initComponent:function(){Teradata.widget.Field.superclass.initComponent.call(this);this.errorTypes=[];this.addEvents("change","invalid","valid","focus","blur")},getName:function(){return this.rendered&&this.el.attr("name")?this.el.attr("name"):this.name||this.id||""},onRender:function(){if(!this.el&&!this.itemWrap){var c=document.createElement("div");this.itemWrap=Teradata.get(c);if(this.autoEl=="input"){this.autoEl={tag:this.autoEl,attr:{type:this.inputType,name:this.name||this.id}}}}else{if(this.el&&!this.itemWrap){if(this.el.get(0).tagName.toLowerCase()=="div"){var b=this.el.find(".teradata-widget-field-"+this.inputType+"-input")[0];if(b){this.itemWrap=this.el;this.el=b}else{b=Teradata.get(Teradata.createDom({tag:this.autoEl,attr:{type:this.inputType,name:this.name||this.id}}));this.el.append(b);this.itemWrap=this.el;this.el=b}}else{this.el.wrap("<div></div>");this.itemWrap=Teradata.get(this.el.parent());this.allowDomMove=false}}}this.itemWrap.attr("comp-id",this.id);Teradata.widget.Field.superclass.onRender.apply(this,arguments);this.itemWrap.addClass("teradata-widget-field");if(this.submitValue===false){this.el.removeAttr("name")}var a=this.el.attr("type")||this.inputType;if(a){if(a=="password"){a="text"}this.el.removeClass("teradata-widget-field-"+a);this.itemWrap.addClass("teradata-widget-field-"+a);this.el.addClass("teradata-widget-field-"+a+"-input")}if(this.readOnly){this.setReadOnly(true)}if(this.tabIndex!==undefined){this.el.setAttr("tabIndex",this.tabIndex)}this.itemWrap.addClass([this.fieldClass,this.cls].join(" "))},afterRender:function(){Teradata.widget.Field.superclass.afterRender.call(this);this.initEvents();this.initValue()},initEvents:function(){this.bind(this.el,"focus",this.onFocus);this.bind(this.el,"blur",this.onBlur)},initValue:function(){if(this.value!==undefined){this.setValue(this.value)}else{if(!Teradata.isEmpty(this.el.val())&&this.el.val()!=this.emptyText){this.setValue(this.el.val())}}this.originalValue=this.getValue()},onFocus:function(a){if(this.focusCls){this.itemWrap.addClass(this.focusCls)}if(!this.hasFocus){this.hasFocus=true;this.startValue=this.getValue();this.fireEvent("focus",this)}},onBlur:function(b){if(this.focusCls){this.itemWrap.removeClass(this.focusCls)}this.hasFocus=false;if(this.validationEvent!==false&&this.validationEvent=="blur"){this.validate()}var a=this.getValue();if(String(a)!==String(this.startValue)){this.fireEvent("change",this,a,this.startValue)}this.fireEvent("blur",this)},setReadOnly:function(a){if(this.rendered){this.el.get(0).readOnly=a}if(this.readOnlyCls&&a){this.itemWrap.addClass(this.readOnlyCls)}else{if(this.readOnlyCls){this.itemWrap.removeClass(this.readOnlyCls)}}this.readOnly=a},validate:function(){if(this.validation){var a=this.getErrors(this.getValue());if(a&&a.length>0){this.getMessageBox().setMessage(a[0],true);this.fireEvent("invalid",this,a);if(this.errorCls){this.itemWrap.addClass(this.errorCls)}return false}else{this.getMessageBox().clear();if(this.errorCls){this.itemWrap.removeClass(this.errorCls)}this.fireEvent("valid",this)}}return true},isValid:function(){return !this.validation||this.getErrors().length>0},getErrors:function(a){return[]},getMessageBox:function(){if(!this.messageBox){this.messageBox=new Teradata.widget.Field.MessageBox(this)}if(this.rendered&&!this.messageBox.rendered){this.messageBox.render(this)}return this.messageBox},getRawValue:function(){var a=this.rendered?this.el.val():Teradata.val(this.value,"");if(a===this.emptyText){a=""}return a},setRawValue:function(a){return this.rendered?(this.el.val(Teradata.isEmpty(a)?"":Teradata.val(a))):""},getValue:function(){if(!this.rendered){return this.value}var a=this.el.val();if(a===this.emptyText||a===undefined){a=""}return a},setValue:function(a){this.value=a;if(this.rendered){this.el.val(Teradata.isEmpty(a)?"":a);this.validate()}return this},getResizeEl:function(){return this.itemWrap},getPositionEl:function(){return this.itemWrap},onResize:function(a,c){if(this.autoWidth){if(Teradata.isIE6){a=this.el.outerWidth();this.itemWrap.width(a+(this.ml?this.ml.outerWidth():0)+(this.mr?this.mr.outerWidth():0))}}else{Teradata.widget.Button.superclass.onResize.apply(this,arguments);var b=this.el.attr("type");if(b){b=b.toLowerCase()}if(this.isHeightResizable()){this.el.height(c-(this.top?this.top.outerHeight():0)-(this.bottom?this.bottom.outerHeight():0));if(b!="checkbox"&&b!="radio"){this.el.width(this.getContentTarget().innerWidth())}}else{if(b!="checkbox"&&b!="radio"){this.el.width(a-(this.ml?this.ml.outerWidth():0)-(this.mr?this.mr.outerWidth():0))}}}}});Teradata.widget.Field.MessageBox=function(a){this.init(a)};Teradata.widget.Field.MessageBox.prototype={init:Teradata.emptyFn,render:function(c){if(c.rendered){var b=document.createElement("div");var a=document.createElement("div");var d=document.createElement("span");b.appendChild(a);a.appendChild(d);this.el=Teradata.get(b);this.inner=Teradata.get(a);this.messageEl=Teradata.get(d);this.el.addClass("teradata-widget-field-messagebox");if(this.iconCls){this.el.addClass(iconCls)}this.inner.addClass("teradata-widget-field-messagebox-inner");this.messageEl.addClass("teradata-widget-field-messagebox-message");c.itemWrap.append(this.el);this.hide();this.rendered=true}},show:function(){this.el.show()},hide:function(){this.el.hide()},setMessage:function(a,b){if(a){this.messageEl.html(a);if(b!==false){this.show()}}else{this.hide()}},clear:function(){this.messageEl.html("");this.hide()}};
/*
 * Copyright 2012 By Teradata China Co.Ltd. All rights reserved
 * 
 * Created on 2012-02-09
 */
Teradata.widget.TextField=Teradata.extend(Teradata.widget.Field,{boxMinHeight:25,boxMaxHeight:25,corners:"lr",focusCls:"teradata-widget-field-text-focus",errorCls:"teradata-widget-field-text-error",disabledCls:"teradata-widget-field-text-disabled",initComponent:function(){this.addEvents("keydown","keyup","keypress");this.inputType="text";Teradata.widget.TextField.superclass.initComponent.call(this)},onRender:function(){Teradata.widget.TextField.superclass.onRender.apply(this,arguments);if(Teradata.isNumber(this.inputMaxLength)){this.el.attr("maxlength",this.inputMaxLength)}if(this.disableInputMethod){this.el.css("ime-mode","disabled")}},initEvents:function(){Teradata.widget.TextField.superclass.initEvents.apply(this,arguments);this.bind(this.el,"keydown",this.onKeyDown);this.bind(this.el,"keyup",this.onKeyUp);this.bind(this.el,"keypress",this.onKeyPress)},onKeyDown:function(a){if(this.fireEvent("keydown",this,a)===false){a.preventDefault();a.stopPropagation()}},onKeyUp:function(a){if(this.fireEvent("keyup",this,a)===false){a.preventDefault();a.stopPropagation()}},onKeyPress:function(d){if(this.fireEvent("keypress",this,d)!==false){var a=d.charCode;var b=d.keyCode;if(Teradata.isGecko&&b==8&&b==46){return}if(this.allowedCharacters){var f=String.fromCharCode(a);if(!this.isAllowedCharacters(f)){d.preventDefault();d.stopPropagation()}}}else{d.preventDefault();d.stopPropagation()}},isAllowedCharacters:function(a){return this.allowedCharacters.indexOf(a)!=-1},getErrors:function(a){var c=Teradata.widget.TextField.superclass.getErrors.apply(this,arguments);a=Teradata.isDefined(a)?a:this.getRawValue();if(Teradata.isFunction(this.validator)){var b=this.validator(a);if(b!==true){c.push(b)}}if(a.length<1||a===this.emptyText){if(!this.required){return c}else{c.push(this.requiredText)}}if(this.required&&(a.length<1||a===this.emptyText)){c.push(this.requiredText)}if(a.length<this.minLength){c.push(String.format(this.minLengthText,this.minLength))}if(a.length>this.maxLength){c.push(String.format(this.maxLengthText,this.maxLength))}if(this.regex&&!this.regex.test(a)){c.push(this.regexText)}return c}});Teradata.reg("text",Teradata.widget.TextField);
/*
 * Copyright 2012 By Teradata China Co.Ltd. All rights reserved
 * 
 * Created on 2012-02-09
 */
Teradata.widget.TriggerField=Teradata.extend(Teradata.widget.TextField,{triggerButtonClickCls:"teradata-widget-field-trigger-button-click",triggerButtonHoverCls:"teradata-widget-field-trigger-button-hover",corners:"l",initComponent:function(){this.addEvents("triggerclick");Teradata.widget.TriggerField.superclass.initComponent.call(this)},onRender:function(){Teradata.widget.TriggerField.superclass.onRender.apply(this,arguments);this.itemWrap.addClass("teradata-widget-field-trigger");this.triggerButton=this.itemWrap.find(".teradata-widget-field-trigger-button")[0];if(this.triggerButton){this.triggerButton=Teradata.get(this.triggerButton)}else{this.triggerButton=Teradata.get(document.createElement("div"));this.triggerButton.addClass("teradata-widget-field-trigger-button");this.triggerButton.insertAfter(this.mc||this.el)}},onResize:function(){Teradata.widget.TriggerField.superclass.onResize.apply(this,arguments);var a=this.el.outerWidth()-this.triggerButton.width();this.el.width(a);this.getContentTarget().width(a)},renderCorners:function(){Teradata.widget.TriggerField.superclass.renderCorners.call(this,true,false)},initEvents:function(){Teradata.widget.TriggerField.superclass.initEvents.call(this);this.bind(this.triggerButton,"mouseover",this.onTriggerOver);this.bind(this.triggerButton,"mouseout",this.onTriggerOut);this.bind(this.triggerButton,"mousedown",this.onTriggerMouseDown);this.bind(this.triggerButton,"mouseup",this.onTriggerMouseUp);this.bind(this.triggerButton,"click",this._onTriggerClick);this.bind(this.triggerButton,"focus",this.onTriggerFocus);this.bind(this.triggerButton,"blur",this.onTriggerBlur)},onTriggerOver:function(a){this.triggerButton.addClass(this.triggerButtonHoverCls)},onTriggerOut:function(a){this.triggerFocus=false;this.triggerButton.removeClass(this.triggerButtonHoverCls)},onTriggerMouseDown:function(a){this.el.focus();this.triggerFocus=true;this.triggerButton.addClass(this.triggerButtonClickCls)},onTriggerMouseUp:function(a){this.el.focus();this.triggerButton.removeClass(this.triggerButtonClickCls);this.triggerFocus=false},_onTriggerClick:function(a){this.onTriggerClick(a);this.fireEvent("triggerclick",this)},onTriggerFocus:function(a){this.triggerFocus=true},onTriggerBlur:function(a){this.triggerFocus=false},onBlur:function(a){if(!this.triggerFocus){Teradata.widget.TriggerField.superclass.onBlur.call(this,a)}},onTriggerClick:Teradata.emptyFn});Teradata.reg("trigger",Teradata.widget.TriggerField);
/*
 * Copyright 2012 By Teradata China Co.Ltd. All rights reserved
 * 
 * Created on 2012-02-09
 */
Teradata.widget.Combo=Teradata.extend(Teradata.widget.TriggerField,{labelField:"text",valueField:"value",maxListHeight:200,initComponent:function(){Teradata.widget.Combo.superclass.initComponent.call(this);this.addEvents("select");this.readOnly=true},onRender:function(){Teradata.widget.Combo.superclass.onRender.apply(this,arguments);if(this.el&&this.el.get(0).tagName.toLowerCase()=="select"){var b=this.el.find("option");this.datas=[];for(var c=0;c<b.length;c++){var d=Teradata.get(b.get(c));var f=d.attr("value");var g=d.html();if(f||g){f=f||g;g=g||f;this.datas.push([f,g])}}var a=this.el;this.el=Teradata.get(document.createElement("input"));this.el.attr("type","text");this.el.insertBefore(a);this.el.get(0).className=a.get(0).className;a.remove();this.el.attr("id",this.id)}this.itemWrap.addClass("teradata-widget-field-combo");this.hiddenField=Teradata.get(document.createElement("input"));this.hiddenField.attr("type","hidden");if(this.submitValue!==false){this.hiddenField.attr("name",this.getName())}this.el.removeAttr("name")},renderList:function(){var b=document.createElement("div");var a=document.createElement("div");this.listWrap=Teradata.get(a);this.listWrap.addClass("teradata-widget-field-combo-list-wrap");this.list=Teradata.get(b);this.list.addClass("teradata-widget-field-combo-list");this.shadow=new Teradata.Shadow();this.itemWrap.append(this.listWrap);this.listWrap.append(this.list);this.shadow.applyTo(this.list);this.list.width(this.width);this.list.width(this.list.width()-(this.list.outerWidth()-this.getPositionEl().outerWidth()));this.dataList=Teradata.get(document.createElement("ul"));this.dataList.addClass("teradata-widget-field-combo-list-data");this.list.append(this.dataList);this.hideList()},update:function(b,d,c){if(c instanceof Array){for(var f=0;f<c.length;f++){this.update(b,d,c[f])}}else{if(b=="remove"){this.dataList.children('li[val="'+c.id+'"]').remove();this.updateListHeight()}else{if(b=="add"||b=="load"){var a=Teradata.get(document.createElement("li"));a.attr("val",c.get(this.valueField));a.html(c.get(this.labelField));this.dataList.append(a);this.updateListHeight()}else{if(b=="update"){this.dataList.find('li[val="'+c.id+'"]').html(c.get(this.labelField)).attr("val",c.get(this.valueField))}}}}},initEvents:function(){Teradata.widget.Combo.superclass.initEvents.call(this);this.bind(this.list,"mouseover",this.onListMouseOver);this.bind(this.list,"mouseout",this.onListMouseOut);this.bind(this.list,"click",this.onListClick)},updateListHeight:function(){var a=this.dataList.innerHeight();if(a>this.maxListHeight){this.dataList.height(this.maxListHeight);this.dataList.addClass("teradata-scroll-y")}else{if(a<this.maxListHeight){this.dataList.css("height","")}}},bindStore:function(){var b=function(i,g){this.update.call(this,"remove",i,g)};var a=function(i,g){this.update.call(this,"remove",i,g)};var d=function(i,g){this.update.call(this,"add",i,g)};var c=function(i,g){this.update.call(this,"load",i,g)};var f=function(i,g){this.update.call(this,"update",i,g)};return function(g){if(this.store){this.store.un("remove",a);this.store.un("add",d);this.store.un("update",f);this.store.un("load",c);this.store.un("clear",b)}this.store=g;this.store.on("clear",b,this);this.store.on("remove",a,this);this.store.on("add",d,this);this.store.on("load",c,this);this.store.on("update",f,this)}}(),afterRender:function(){this.renderList();Teradata.widget.Combo.superclass.afterRender.apply(this,arguments);if(!this.store&&Teradata.isArray(this.datas)){var a=new Teradata.data.Store({fields:["value","text"]});this.bindStore(a)}else{if(this.store){this.bindStore(this.store)}}if(this.datas){this.store.loadData(this.datas)}else{if(this.store&&this.store.url){this.store.load()}}},onTriggerClick:function(a){this.showList()},onListClick:function(c){this.el.focus();var b=Teradata.get(c.target);if(b.is("li")){var a=b.attr("val");this.setValue(a);this.fireEvent("select",this,b.get(0))}this.hideList()},onListMouseOver:function(b){var a=Teradata.get(b.target);if(b.target==this.list.get(0)||a.parents(".teradata-widget-field-combo-list").get(0)==this.list.get(0)){this.mouseInList=true}if(a.is("li")){a.addClass("teradata-over")}},onListMouseOut:function(b){var a=Teradata.get(b.relatedTarget);if(a.get(0)!=this.list.get(0)&&a.parents(".teradata-widget-field-combo-list").get(0)!=this.list.get(0)){this.el.focus();this.mouseInList=false}a=$(b.target);if(a.is("li")){a.removeClass("teradata-over")}},showList:function(){if(this.rendered){this.dataList.find('li[val="'+this.getValue()+'"]').addClass("teradata-selected");this.listWrap.show();this.updateListHeight();this.shadow.applyTo(this.list)}},onBlur:function(a){if(!this.mouseInList){Teradata.widget.Combo.superclass.onBlur.call(this,a);this.hideList()}},hideList:function(){if(this.rendered){this.dataList.find(".teradata-selected").removeClass("teradata-selected");this.listWrap.hide()}},setValue:function(b){if(this.rendered&&this.store){if(b===""||b===null||b===undefined){this.value="";this.hiddenField.val("");return Teradata.widget.Combo.superclass.setValue.call(this,"")}else{var a=this.store.getBy(this.valueField,b);if(a){var c=a.get(this.labelField);b=a.get(this.valueField);this.hiddenField.val(b);this.value=b;return Teradata.widget.Combo.superclass.setValue.call(this,c)}}}else{this.value=b;return Teradata.widget.Combo.superclass.setValue.call(this,b)}return this},getValue:function(){if(!this.rendered){return this.value}var a=this.el.val();if(a===this.emptyText||a===undefined){a=""}else{a=this.hiddenField.val()}return a},getName:function(){var a=this.hiddenField;return a&&a.name?a.name:this.hiddenName||Teradata.widget.Combo.superclass.getName.call(this)},getStore:function(){return this.store},onResize:function(a){Teradata.widget.Combo.superclass.onResize.apply(this,arguments);if(this.list){this.list.width(a);this.list.width(this.list.width()-(this.list.outerWidth()-this.getPositionEl().outerWidth()));this.shadow.applyTo(this.list)}}});Teradata.reg("combo",Teradata.widget.Combo);
/*
 * Copyright 2012 By Teradata China Co.Ltd. All rights reserved
 * 
 * Created on 2012-03-09
 */
Teradata.widget.Textarea=Teradata.extend(Teradata.widget.TextField,{height:80,boxMixHeight:undefined,boxMaxHeight:undefined,corners:"all",focusCls:"teradata-widget-field-textarea-focus",disabledCls:"teradata-widget-field-textarea-disabled",errorCls:"teradata-widget-field-textarea-error",initComponent:function(){Teradata.widget.Textarea.superclass.initComponent.call(this)},onRender:function(){this.autoEl={tag:"textarea",attr:{cols:"0",rows:"0"}};Teradata.widget.Textarea.superclass.onRender.apply(this,arguments);this.itemWrap.addClass("teradata-widget-field-textarea")}});Teradata.reg("textarea",Teradata.widget.Textarea);
/*
 * Copyright 2012 By Teradata China Co.Ltd. All rights reserved
 * 
 * Created on 2012-02-09
 */
Teradata.widget.EmailField=Teradata.extend(Teradata.widget.TextField,{initComponent:function(){Teradata.widget.EmailField.superclass.initComponent.call(this);this.regex=/^[\w-]+(\.[\w-]+)*@[\w-]+(\.[\w-]+)+$/}});Teradata.reg("email",Teradata.widget.EmailField);
/*
 * Copyright 2012 By Teradata China Co.Ltd. All rights reserved
 * 
 * Created on 2012.04.13
 */
Teradata.widget.NumberField=Teradata.extend(Teradata.widget.TextField,{initComponent:function(){Teradata.widget.NumberField.superclass.initComponent.call(this);this.disableInputMethod=true;this.allowedCharacters=["+","-","0","1","2","3","4","5","6","7","8","9","."];this.regex=/^[\+\-]?\d*\.?\d+$/;if(this.isMoney){this.precision=2}},onRender:function(){Teradata.widget.NumberField.superclass.onRender.apply(this,arguments);this.itemWrap.addClass("teradata-widget-field-number")},isAllowedCharacters:function(f){if(!Teradata.widget.NumberField.superclass.isAllowedCharacters.call(this,f)){return false}var a=this.getValue();var d=a.indexOf(".");var b=this.el.cursorPosition();if(b!==0&&(f=="+"||f=="-")){return false}if(f=="."&&(d!=-1||this.precision===0)){return false}if(d!=-1&&this.precision){if(b>d&&a.length-d>this.precision){return false}}return true},getErrors:function(a){var d=Teradata.widget.NumberField.superclass.getErrors.call(this,a);var b=parseFloat(a,10);if(b<this.minValue){d.push(String.format(this.minValueText,this.minValue))}if(b>this.maxValue){d.push(String.format(this.maxValueText,this.maxValue))}var c=a.indexOf(".");if(this.precision==0&&c!=-1){d.push(this.integerText)}if(a&&this.precision&&c!=-1&&a.length-c-1>this.precision){d.push(String.format(this.precisionText,this.precision))}return d}});Teradata.reg("number",Teradata.widget.NumberField);
/*
 * Copyright 2012 By Teradata China Co.Ltd. All rights reserved
 * 
 * Created on 2012.03.12
 */
Teradata.widget.Checkbox=Teradata.extend(Teradata.widget.Field,{width:60,boxMinHeight:25,boxMaxHeight:25,corners:"none",validation:false,inputType:"checkbox",focusCls:"teradata-widget-field-checkbox-focus",initComponent:function(){this.addEvents("checkchange");Teradata.widget.Checkbox.superclass.initComponent.call(this)},onRender:function(){if(this.el){this.checked=this.el.get(0).checked}Teradata.widget.Checkbox.superclass.onRender.apply(this,arguments);this.itemWrap.addClass("teradata-widget-field-checkbox");this.labelEl=this.itemWrap.find(".teradata-widget-field-checkbox-label")[0];this.text=this.itemWrap.find(".teradata-widget-field-checkbox-text")[0];if(this.labelEl){this.labelEl=Teradata.get(this.labelEl)}else{this.el.wrap("<label></label>");this.labelEl=this.el.parent();this.labelEl.addClass("teradata-widget-field-checkbox-label")}if(this.text){this.text=Teradata.get(this.text);this.label=this.text.html()}else{this.text=Teradata.get(document.createElement("span"));this.text.addClass("teradata-widget-field-checkbox-text");this.text.html(this.label);this.labelEl.append(this.text)}this.checked=!!this.checked;this.setChecked(this.checked)},initEvents:function(){Teradata.widget.Checkbox.superclass.initEvents.call(this);this.bind(this.labelEl,"click",function(a){if(!this.readOnly){this.fireEvent("checkchange",this,this.isChecked())}else{return false}})},setChecked:function(a,b){if(this.isChecked()!=a){this.checked=a;if(this.rendered){if(a){this.el.attr("checked","checked")}else{this.el.removeAttr("checked")}}if(!b){this.fireEvent("checkchange",this,this.isChecked())}}},setReadOnly:function(a){Teradata.widget.Checkbox.superclass.setReadOnly.call(this,a);if(!this.disabled){if(a){this.el.removeAttr("name");this.el.attr("disabled",true);if(this.submitValue){this.hiddenField=Teradata.get(Teradata.createDom({tag:"input",attr:{type:"hidden",name:this.getName()}}));this.hiddenField.insertBefore(this.el)}}else{if(this.hiddenField){this.hiddenField.remove();delete this.hiddenField}if(this.submitValue){this.el.attr("name",this.getName())}}}else{if(this.hiddenField){this.hiddenField.remove();delete this.hiddenField()}}},disable:function(a){Teradata.widget.Checkbox.superclass.disable.call(this,a);if(!a){this.setReadOnly(this.readOnly)}},isChecked:function(){return this.rendered?this.el.get(0).checked:this.checked},setLabel:function(a){this.label=a;this.text.html(a)}});Teradata.reg("checkbox",Teradata.widget.Checkbox);
/*
 * Copyright 2012 By Teradata China Co.Ltd. All rights reserved
 * 
 * Created on 2012.03.12
 */
Teradata.widget.Radio=Teradata.extend(Teradata.widget.Field,{width:60,boxMinHeight:25,boxMaxHeight:25,corners:"none",validation:false,inputType:"radio",focusCls:"teradata-widget-field-radio-focus",initComponent:function(){this.addEvents("checkchange");Teradata.widget.Radio.superclass.initComponent.call(this)},onRender:function(){if(this.el){this.checked=this.el.get(0).checked}Teradata.widget.Radio.superclass.onRender.apply(this,arguments);this.itemWrap.addClass("teradata-widget-field-radio");this.labelEl=this.itemWrap.find(".teradata-widget-field-radio-label")[0];this.text=this.itemWrap.find(".teradata-widget-field-radio-text")[0];if(this.labelEl){this.labelEl=Teradata.get(this.labelEl)}else{this.el.wrap("<label></label>");this.labelEl=this.el.parent();this.labelEl.addClass("teradata-widget-field-radio-label")}if(this.text){this.text=Teradata.get(this.text);this.label=this.text.html()}else{this.text=Teradata.get(document.createElement("span"));this.text.addClass("teradata-widget-field-radio-text");this.text.html(this.label);this.labelEl.append(this.text)}if(this.hasOwnProperty("checked")){this.setChecked(this.checked)}else{this.checked=!!this.checked;this.setChecked(this.checked)}},initEvents:function(){Teradata.widget.Radio.superclass.initEvents.call(this);this.bind(this.labelEl,"click",function(a){if(this.readOnly){return false}this.fireEvent("checkchange",this,this.isChecked())})},setChecked:function(a,b){if(this.isChecked()!=a){this.checked=a;if(this.rendered){if(a){this.el.attr("checked","checked")}else{this.el.removeAttr("checked")}}if(!b){this.fireEvent("checkchange",this,this.isChecked())}}},setReadOnly:function(a){Teradata.widget.Radio.superclass.setReadOnly.call(this,a);if(!this.disabled){if(a){this.el.removeAttr("name");this.el.attr("disabled",true);if(this.submitValue){this.hiddenField=Teradata.get(Teradata.createDom({tag:"input",attr:{type:"hidden",name:this.getName()}}));this.hiddenField.insertBefore(this.el)}}else{if(this.hiddenField){this.hiddenField.remove();delete this.hiddenField}if(this.submitValue){this.el.attr("name",this.getName())}}}else{if(this.hiddenField){this.hiddenField.remove();delete this.hiddenField()}}},disable:function(a){Teradata.widget.Radio.superclass.disable.call(this,a);if(!a){this.setReadOnly(this.readOnly)}},isChecked:function(){return this.rendered?this.el.get(0).checked:this.checked},setLabel:function(a){this.label=a;this.text.html(a)}});Teradata.reg("radio",Teradata.widget.Radio);
/*
 * Copyright 2012 By Teradata China Co.Ltd. All rights reserved
 * 
 * Created on 2012-02-09
 */
Teradata.widget.CheckboxGroup=Teradata.extend(Teradata.widget.Field,{columns:3,corners:"none",width:180,labelField:"text",valueField:"value",valueSeparator:",",autoHeight:true,singleValue:false,initComponent:function(){Teradata.widget.CheckboxGroup.superclass.initComponent.call(this);this.inputType="hidden";this.items=[]},onRender:function(){Teradata.widget.CheckboxGroup.superclass.onRender.apply(this,arguments);this.itemWrap.addClass("teradata-widget-field-checkboxgroup");if(!this.singleValue){this.el.removeAttr("name")}},bindStore:function(){var b=function(i,g){this.update.call(this,"remove",i,g)};var a=function(i,g){this.update.call(this,"remove",i,g)};var d=function(i,g){this.update.call(this,"add",i,g);this.syncItemsChecked()};var c=function(i,g){this.update.call(this,"add",i,g);this.syncItemsChecked()};var f=function(i,g){this.update.call(this,"update",i,g)};return function(g){if(this.store){this.store.un("clear",b);this.store.un("remove",a);this.store.un("add",d);this.store.un("update",f);this.store.un("load",c)}this.store=g;this.store.on("clear",b,this);this.store.on("remove",a,this);this.store.on("add",d,this);this.store.on("load",c,this);this.store.on("update",f,this)}}(),afterRender:function(){Teradata.widget.CheckboxGroup.superclass.afterRender.apply(this,arguments);if(!this.store&&Teradata.isArray(this.datas)){var a=new Teradata.data.Store({fields:[this.valueField,this.labelField]});this.bindStore(a)}else{if(this.store){this.bindStore(this.store)}}if(this.datas){this.store.loadData(this.datas)}else{if(this.store&&this.store.url){this.store.load()}}},update:function(a,d,b){if(b instanceof Array){for(var f=0;f<b.length;f++){this.update(a,d,b[f])}}else{if(a=="add"){var j=new Teradata.widget.Checkbox({id:b.id,value:b.get(this.valueField),label:b.get(this.labelField),name:this.singleValue?null:this.getName(),width:this.getItemWidth(),submitValue:this.submitValue,readOnly:this.readOnly,disabled:this.disabled});j.on("checkchange",function(){var c=[];for(var k=0;k<this.items.length;k++){if(this.items[k].isChecked()){c.push(this.items[k].getValue())}}this.setValue(c)},this);this.items.push(j);j.render(this.itemWrap,this.items.length)}else{if(a=="remove"){var g=Teradata.getCmp(b.id);this.items.remove(g);g.destroy()}else{if(a=="update"){var g=Teradata.getCmp(b.id);g.setValue(b.get(this.valueField));g.setLabel(b.get(this.labelField))}}}}},getItemWidth:function(){return this.itemWrap.innerWidth()/this.columns},syncItemsChecked:function(){var d=this.getValue();if(d){d=d.split(this.valueSeparator)}for(var b=0;b<this.items.length;b++){var c=this.items[b];var a=c.getValue();c.setChecked(d.indexOf(a)!=-1)}},onDestroy:function(){Teradata.widget.CheckboxGroup.superclass.onDestroy.call(this);for(var a=0;a<this.items.length;a++){this.items[a].destroy()}this.store.destroy()},getName:function(){return this.name||this.id},setValue:function(b,c){if(Teradata.isArray(b)&&b.length>0){b=b.join(this.valueSeparator)}var a=Teradata.widget.CheckboxGroup.superclass.setValue.call(this,b);this.syncItemsChecked();return a},onResize:function(){Teradata.widget.CheckboxGroup.superclass.onResize.apply(this,arguments);for(var a=0;a<this.items.length;a++){this.items[a].setWidth(this.getItemWidth())}},getErrors:function(a){var b=Teradata.widget.CheckboxGroup.superclass.getErrors.call(this,a);if(this.required&&(a.length<1||a===this.emptyText)){b.push(this.requiredText)}return b}});Teradata.reg("checkboxgroup",Teradata.widget.CheckboxGroup);
/*
 * Copyright 2012 By Teradata China Co.Ltd. All rights reserved
 * 
 * Created on 2012-02-09
 */
Teradata.widget.RadioGroup=Teradata.extend(Teradata.widget.Field,{columns:3,corners:"none",width:180,labelField:"text",valueField:"value",valueSeparator:",",autoHeight:true,initComponent:function(){Teradata.widget.RadioGroup.superclass.initComponent.call(this);this.inputType="hidden";this.items=[]},onRender:function(){Teradata.widget.RadioGroup.superclass.onRender.apply(this,arguments);this.itemWrap.addClass("teradata-widget-field-radiogroup")},bindStore:function(){var b=function(i,g){this.update.call(this,"remove",i,g)};var a=function(i,g){this.update.call(this,"remove",i,g)};var d=function(i,g){this.update.call(this,"add",i,g);this.syncItemsChecked()};var c=function(i,g){this.update.call(this,"add",i,g);this.syncItemsChecked()};var f=function(i,g){this.update.call(this,"update",i,g)};return function(g){if(this.store){this.store.un("clear",b);this.store.un("remove",a);this.store.un("add",d);this.store.un("update",f);this.store.un("load",c)}this.store=g;this.store.on("clear",b,this);this.store.on("remove",a,this);this.store.on("add",d,this);this.store.on("load",c,this);this.store.on("update",f,this)}}(),afterRender:function(){Teradata.widget.RadioGroup.superclass.afterRender.apply(this,arguments);if(!this.store&&Teradata.isArray(this.datas)){var a=new Teradata.data.Store({fields:[this.valueField,this.labelField]});this.bindStore(a)}else{if(this.store){this.bindStore(this.store)}}if(this.datas){this.store.loadData(this.datas)}else{if(this.store&&this.store.url){this.store.load()}}},update:function(a,d,b){if(b instanceof Array){for(var f=0;f<b.length;f++){this.update(a,d,b[f])}}else{if(a=="add"){var j=new Teradata.widget.Radio({id:b.id,value:b.get(this.valueField),label:b.get(this.labelField),width:this.getItemWidth(),submitValue:false,readOnly:this.readOnly,disabled:this.disabled});j.on("checkchange",function(c,i){if(i){this.setValue(c.getValue())}},this);this.items.push(j);j.render(this.itemWrap,this.items.length)}else{if(a=="remove"){var g=Teradata.getCmp(b.id);this.items.remove(g);g.destroy()}else{if(a=="update"){var g=Teradata.getCmp(b.id);g.setValue(b.get(this.valueField));g.setLabel(b.get(this.labelField))}}}}},syncItemsChecked:function(){var d=this.getValue();for(var b=0;b<this.items.length;b++){var c=this.items[b];var a=c.getValue();if(d==a){c.setChecked(true)}else{c.setChecked(false)}}},getItemWidth:function(){return this.itemWrap.innerWidth()/this.columns},onDestroy:function(){Teradata.widget.RadioGroup.superclass.onDestroy.call(this);for(var a=0;a<this.items.length;a++){this.items[a].destroy()}this.store.destroy()},getName:function(){return this.name||this.id},setValue:function(b){var a=Teradata.widget.RadioGroup.superclass.setValue.call(this,b);this.syncItemsChecked();return a},onResize:function(){Teradata.widget.RadioGroup.superclass.onResize.apply(this,arguments);for(var a=0;a<this.items.length;a++){this.items[a].setWidth(this.getItemWidth())}},getErrors:function(a){var b=Teradata.widget.RadioGroup.superclass.getErrors.call(this,a);if(this.required&&(a.length<1||a===this.emptyText)){b.push(this.requiredText)}return b}});Teradata.reg("radiogroup",Teradata.widget.RadioGroup);
/*
 * Copyright 2012 By Teradata China Co.Ltd. All rights reserved
 * 
 * Created on 2012-02-09
 */
Teradata.widget.DateField=Teradata.extend(Teradata.widget.TriggerField,{format:"yyyy-MM-dd",selectButtonText:"OK",todayButtonText:"Today",minDateText:"The date must be after {0}",maxDateText:"The date must be before {0}",betweenDateText:"The date must be between {0} to {1}",initComponent:function(){Teradata.widget.DateField.superclass.initComponent.call(this);this.setMinDate(this.minDate);this.setMaxDate(this.maxDate);this.readOnly=true},onRender:function(){Teradata.widget.DateField.superclass.onRender.apply(this,arguments);this.itemWrap.addClass("teradata-widget-field-date")},renderPicker:function(){var d=document.createElement("div");var b=document.createElement("div");this.pickerLayerWrap=Teradata.get(b);this.pickerLayerWrap.addClass("teradata-widget-field-date-picker-wrap");this.pickerLayer=Teradata.get(d);this.pickerLayer.addClass("teradata-widget-field-date-picker");this.itemWrap.append(this.pickerLayerWrap);this.pickerLayerWrap.append(this.pickerLayer);this.picker=new Teradata.widget.DatePicker({date:this.getValue(),minDate:this.minDate,maxDate:this.maxDate,format:this.format});this.picker.render(this.pickerLayer);var c=this.picker.pickerFooter;this.todayButton=new Teradata.widget.Button({text:this.todayButtonText,handler:function(){var f=new Date();this.picker.setDate(f);this.picker.setPickerDate(f);this.setValue(f);this.hidePickerLayer()}.createDelegate(this)});this.todayButton.render(c);var a=document.createElement("div");a.className="teradata-clear";c.append(a);this.shadow=new Teradata.Shadow();this.shadow.applyTo(this.pickerLayer);this.hidePickerLayer()},initEvents:function(){Teradata.widget.Combo.superclass.initEvents.call(this);this.bind(this.pickerLayer,"mouseover",this.onListMouseOver);this.bind(this.pickerLayer,"mouseout",this.onListMouseOut);this.picker.on("select",function(b,a){this.setValue(a);window.setTimeout(function(){this.hidePickerLayer()}.createDelegate(this),50)},this)},hidePickerLayer:function(){if(this.rendered){this.pickerLayerWrap.addClass("teradata-hide-visibility")}},showPickerLayer:function(){if(this.rendered){var a=this.getValue();if(a){this.picker.setDate(Date.parseDate(a,this.format))}this.pickerLayerWrap.removeClass("teradata-hide-visibility");this.shadow.applyTo(this.pickerLayer)}},onTriggerClick:function(){this.showPickerLayer()},onListMouseOver:function(b){var a=Teradata.get(b.target);if(b.target==this.pickerLayer.get(0)||a.parents(".teradata-widget-field-date-picker").get(0)==this.pickerLayer.get(0)){this.mouseInList=true}},onListMouseOut:function(b){var a=Teradata.get(b.relatedTarget);if(a.get(0)!=this.pickerLayer.get(0)&&a.parents(".teradata-widget-field-date-picker").get(0)!=this.pickerLayer.get(0)){this.el.focus();this.mouseInList=false}},onBlur:function(a){if(!this.mouseInList){Teradata.widget.DateField.superclass.onBlur.call(this,a);this.hidePickerLayer()}},afterRender:function(){this.renderPicker();Teradata.widget.DateField.superclass.afterRender.apply(this,arguments)},setMinDate:function(a){if(a){if(Teradata.isString(a)){a=Date.parseDate(a,this.format)}this.minDate=a}else{this.minDate=null}},setMaxDate:function(a){if(a){if(Teradata.isString(a)){a=Date.parseDate(a,this.format)}this.maxDate=a}else{this.maxDate=null}},setValue:function(a){if(Teradata.isString(a)){a=Date.parseDate(a,this.format)}return Teradata.widget.DateField.superclass.setValue.call(this,a.format(this.format))},getErrors:function(a){var b=Teradata.widget.DateField.superclass.getErrors.apply(this,arguments);a=Date.parseDate(a,this.format);if(this.minDate&&this.maxDate){if(a.dateLessThan(this.minDate)||a.dateGreatThan(this.maxDate)){b.push(String.format(this.betweenDateText,this.minDate.format(this.format),this.maxDate.format(this.format)))}}else{if(this.minDate&&a.dateLessThan(this.minDate)){b.push(String.format(this.minDateText,this.minDate.format(this.format)))}else{if(this.maxDate&&a>a.dateGreatThan(this.maxDate)){b.push(String.format(this.maxDateText,this.maxDate.format(this.format)))}}}return b}});Teradata.reg("date",Teradata.widget.DateField);
/*
 * Copyright 2012 By Teradata China Co.Ltd. All rights reserved
 * 
 * Created on 2012.03.20
 */
Teradata.widget.FileField=Teradata.extend(Teradata.widget.TriggerField,{initComponent:function(){Teradata.widget.FileField.superclass.initComponent.call(this)},onRender:function(){Teradata.widget.FileField.superclass.onRender.apply(this,arguments);this.itemWrap.addClass("teradata-widget-field-file");this.el.removeAttr("name");this.renderInputFile()},onTriggerClick:function(){this.inputFile.click()},initEvents:function(){Teradata.widget.FileField.superclass.initEvents.apply(this,arguments);this.bind(this.el,"keydown",function(a){if(a.keyCode!=9){a.preventDefault()}if(a.keyCode==8||a.keyCode==46){this.setValue()}})},renderInputFile:function(){if(this.inputFile){this.inputFile.remove();delete this.inputFile}this.inputFile=Teradata.get(Teradata.createDom({tag:"input",attr:{type:"file"},cls:["teradata-widget-field-file-input-file","teradata-hide-visibility"]}));if(this.submitValue!==false){this.inputFile.attr("name",this.getName())}this.itemWrap.append(this.inputFile);this.bind(this.inputFile,"change",function(a){this.setValue(this.inputFile.val())})},setValue:function(a){if(Teradata.isEmpty(a)){this.renderInputFile()}return Teradata.widget.FileField.superclass.setValue.call(this,a)}});Teradata.reg("file",Teradata.widget.FileField);